title: 关于hexo博客的可迁移化改造
date: 2022-05-25 18:10:19
tags:
---
### 为什么这次又选择hexo

实际上这种静态博客我之前已经放弃了，之后的一段时间自己用的是wordpress和其他的平台，好处是wordpress动态，自己建站部署，爱折腾的话真的很多可以拿来玩的，可以直接在页面去编辑文章。
写作平台同样也支持在线编辑，而且SEO优化做的不错，比如某XXDN，即使随便写写也会有人看到，实际上这种反馈感还蛮不错的。
但是呢，自己动态博客网站，域名过期没有去搞，然后在一次自己想玩某个东西没注意，把自己部署网站的服务器给重装系统了，直接GG。
国内目前，审核机制的原因，可能会出现滞后性，关键是服务提供商有时候跟抽风一样，觉得有必要不把鸡蛋放在一个篮子里。

而目前，静态博客直接挂载在Github上，不用担心自己服务器误操作，比较省心所以又回来走“回头路”。

列一下静态博客网站的优缺点：
优点：
1 简单，很多甚至不需要服务器，直接挂在Github Page就可以了
2 选择的框架足够多，有node.js的Hexo，ruby的Jekyll，go的hugo，这些都是使用非常广泛的，社区活跃插件足够多，主题更丰富（动态的目前只有PHP的wordpress，其他的都比较小众，很多都是自己手敲的，受众不多）

缺点
1  没有wordpress那样的后台，不能在线编辑，需要自己本地生成编辑然后再去服务器或者Github上把编译好的传上去。
2  如果换电脑或者系统，可能就要重新弄了
<!--more-->
就像上边hugo hexo Jekyll这些都是比较流行的，用的比较多，我为什么选择hexo呢？很简单，就是之前部署过，实际上我推荐的是hugo，号称编译最快
而且是go语言，我也比较感兴趣想试水，再加上是以上几种在GitHub上star最多的，应该是首选。

但是，鉴于之前GitHub Page已经用了hexo，那就选择这个先玩明白hexo再说，未来的架构选择肯定还是hugo----动态wordpress----动态更好的或者自己手撸。

### hexo改造
这次改造的重点是针对我之前对静态博客弃坑的痛点：可迁移，异地编译
这里的迁移指的不只是，说我写的博客可以迁出去，实际上现在主流的自建静态/动态博客框架，或者博客运营平台都支持markdown文档。<br>
可迁移就是我换电脑了，或者说我用别人的电脑也可以编辑文章给自己的博客更新，这一点在我刚开始使用hexo，发现自己本地配置环境也就罢了。
很多东西传到GitHub Page只是编译好的静态文件，你换个电脑可能就没办法根据你GitHub Page上的东西继续。

所以这次的改造其实是通过Git分支管理来解决这个问题
参照的主要文章是:<br>

<a href="https://liujiaboy.github.io/2020/03/06/Github-Hexo/" title="Hexo的可迁移改造">Hexo的可迁移改造</a><br>

主要的思路就是，Git创建分支：master，hexo两个分支
master分支主要是hexo编译后的静态文件，主要是为了挂载在Github Page上的（这个是可以在_config.yml上面指定的）
而新创建的hexo分支，则是你本地hexo的全部备份，这样你换电脑重装系统，只需要拉一下这个分支，配置好node.js环境，然后稍微做一些操作就可以，在新的电脑上生成文件编译了。<br>

这个思路其实可以套用在其他的静态博客挂载的Github Page上的，对了最好把全量备份的分支设置成默认分支，这样以后直接来下来直接改，否则拉下来的master分支都是编译好的文件用来直接展示，没啥用。


### hexo的一些设置
hexo涉及到一些基本操作，需要自己手动设置，比如说要换成自己的域名，更换个主题。
还有一些是需要自己定制化的一些，比如说默认展示文章全部的就听坑爹的，我们可以设置为预览的形式。
(实际上由于主题限制，像有些yml配置可能不生效，不如这个缩略的，可能要在文章里面添加more标签，其实wordpress也这样)

```
auto_excerpt:
enable: true #将原有的false改为true
length: 300  #设置预览的字数
```

还有就是可以依靠安装插件来是实现某些功能，比如说统计字数

```
npm install hexo-wordcount --save
```

这里推荐一个插件，因为静态页面，很多操作还要通过命令，比如生成新的文章，发布这些。博客以内容为主，如何简化写作的，尤其是我不想去post目录里面去修改md文章，能解决在线编辑这个问题。我这边添加一个插件hexo-admin

具体的步骤：
（1）跳转到对应hexo的目录

（2）安装admin插件
```
npm install --save hexo-admin
```
（3）启动服务器，进入到admin,就可以进入在线编辑页
localhost:4000/admin


以下是关于一些功能的设置以及hexo的插件列表地址：

<a href="https://zhuanlan.zhihu.com/p/33616481" title="知乎上的一个关于hexo的优化设置">知乎上的一个关于hexo的优化设置</a><br>
<a href="https://hexo.io/plugins/" title="Hexo的官方插件列表地址">Hexo的官方插件列表地址</a><br>
{"meta":{"version":1,"warehouse":"4.0.1"},"models":{"Asset":[{"_id":"source/images/hexo_next.png","path":"images/hexo_next.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","path":"lib/font-awesome/css/all.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","path":"lib/font-awesome/webfonts/fa-brands-400.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","path":"lib/font-awesome/webfonts/fa-regular-400.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","path":"lib/font-awesome/webfonts/fa-solid-900.woff2","modified":0,"renderable":1}],"Cache":[{"_id":"source/_posts/Mockito实战.md","hash":"969c32a99a935def6a1bd2ef7911c478425d96c0","modified":1681899034572},{"_id":"source/_posts/关于hexo博客的可迁移化改造.md","hash":"9ec35a9da35619226d2fbef70da72d903164e0cf","modified":1681899034573},{"_id":"source/_posts/hexo的优化和美化.md","hash":"81832e6a678abc9a57e03d2ab52bdf3e266b4918","modified":1681899034572},{"_id":"source/_posts/红黑树.md","hash":"e487cc918390cb45b6003892c1cb9a860b20261d","modified":1681899034573},{"_id":"source/categories/index.md","hash":"9f39da0a6788c4231e9a85bfbd3cd8fe058b4c8d","modified":1681899034574},{"_id":"source/images/hexo_next.png","hash":"cb3f16ed956cdd955de97fc018a6884fb7f5e5bb","modified":1681899034574},{"_id":"source/tags/index.md","hash":"ea3f144f03bd624c0b5f49a39b8140d91c98475e","modified":1681899034575},{"_id":"themes/next/.editorconfig","hash":"731c650ddad6eb0fc7c3d4a91cad1698fe7ad311","modified":1681899034610},{"_id":"themes/next/.eslintrc.json","hash":"d3c11de434171d55d70daadd3914bc33544b74b8","modified":1681899034611},{"_id":"themes/next/.travis.yml","hash":"379f31a140ce41e441442add6f673bf397d863ea","modified":1681899034612},{"_id":"themes/next/.stylintrc","hash":"6259e2a0b65d46865ab89564b88fc67638668295","modified":1681899034611},{"_id":"themes/next/README.md","hash":"7d56751b580d042559b2acf904fca4b42bcb30a7","modified":1681899034612},{"_id":"themes/next/LICENSE.md","hash":"0a9c7399f102b4eb0a6950dd31264be421557c7d","modified":1681899034612},{"_id":"themes/next/_config.yml","hash":"381da2134541b3e40dae16ebddbc6bbabef96b6a","modified":1681899034613},{"_id":"themes/next/crowdin.yml","hash":"4a53f5985e545c635cb56b2a57ed290cb8cf8942","modified":1681899034613},{"_id":"themes/next/gulpfile.js","hash":"0c76a1ac610ee8cbe8e2cc9cca1c925ffd0edf98","modified":1681899034634},{"_id":"themes/next/package.json","hash":"b099e7cea4406e209130410d13de87988ba37b2a","modified":1681899034720},{"_id":"themes/next/docs/AGPL3.md","hash":"f463f95b169d64983f59fa6f3e4b6760290a0e6b","modified":1681899034614},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"60c7e9ef0c578deebad43e9395c958fa61096baf","modified":1681899034614},{"_id":"themes/next/docs/AUTHORS.md","hash":"cde7cc095ac31b421a573042cf61060f90d9ad0d","modified":1681899034615},{"_id":"themes/next/docs/DATA-FILES.md","hash":"980fb8d37701f7fd96b30bb911519de3bbb473d1","modified":1681899034615},{"_id":"themes/next/docs/INSTALLATION.md","hash":"07ea00bee149a1bdc9073e903ee6b411e9f2f818","modified":1681899034619},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"6cc663db5e99fd86bb993c10d446ad26ada88e58","modified":1681899034621},{"_id":"themes/next/docs/LICENSE.txt","hash":"ae5ad07e4f4106bad55535dba042221539e6c7f9","modified":1681899034622},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"1e86d32063b490d204baa9d45d8d3cb22c24a37d","modified":1681899034624},{"_id":"themes/next/languages/ar.yml","hash":"abcf220bd615cec0dd50e4d98da56580169d77e1","modified":1681899034635},{"_id":"themes/next/docs/MATH.md","hash":"f56946053ade0915ff7efa74d43c38b8dd9e63bb","modified":1681899034623},{"_id":"themes/next/languages/de.yml","hash":"15078b7ede1b084e8a6a15d271f0db9c325bd698","modified":1681899034635},{"_id":"themes/next/languages/default.yml","hash":"ea5e6aee4cb14510793ac4593a3bddffe23e530c","modified":1681899034635},{"_id":"themes/next/languages/es.yml","hash":"f064c793d56a5e0f20cda93b6f0e355044efc7d8","modified":1681899034636},{"_id":"themes/next/languages/en.yml","hash":"dbb64776f9c001c54d0058256c415a9a0724ed5d","modified":1681899034636},{"_id":"themes/next/languages/fa.yml","hash":"6c0a7d5bcc26eb45a9f3e02f13117c668e77fffd","modified":1681899034637},{"_id":"themes/next/languages/fr.yml","hash":"3e2f89d4bb4441d33ecc7b5a4ee114f627603391","modified":1681899034637},{"_id":"themes/next/languages/hu.yml","hash":"0ea89ffaefd02a10494995f05a2a59d5e5679a28","modified":1681899034638},{"_id":"themes/next/languages/id.yml","hash":"7599bb0ecf278beb8fde3d17bfc148a3241aef82","modified":1681899034638},{"_id":"themes/next/languages/it.yml","hash":"46222f468e66789e9ba13095809eb5e5b63edf30","modified":1681899034638},{"_id":"themes/next/languages/ja.yml","hash":"bf279d0eb1911806d01a12f27261fbc76a3bb3f9","modified":1681899034638},{"_id":"themes/next/languages/nl.yml","hash":"9749cf90b250e631dd550a4f32ada3bb20f66dd0","modified":1681899034639},{"_id":"themes/next/languages/pt-BR.yml","hash":"69aa3bef5710b61dc9a0f3b3a8f52f88c4d08c00","modified":1681899034639},{"_id":"themes/next/languages/pt.yml","hash":"f6606dd0b916a465c233f24bd9a70adce34dc8d6","modified":1681899034640},{"_id":"themes/next/languages/ru.yml","hash":"012abc694cf9de281a0610f95f79c594f0a16562","modified":1681899034640},{"_id":"themes/next/languages/tr.yml","hash":"c4e9ab7e047ae13a19f147c6bec163c3ba2c6898","modified":1681899034640},{"_id":"themes/next/languages/uk.yml","hash":"69ef00b1b8225920fcefff6a6b6f2f3aad00b4ce","modified":1681899034640},{"_id":"themes/next/languages/ko.yml","hash":"af4be6cb394abd4e2e9a728418897d2ed4cc5315","modified":1681899034639},{"_id":"themes/next/languages/vi.yml","hash":"6a578cc28773bd764f4418110500478f185d6efa","modified":1681899034641},{"_id":"themes/next/languages/zh-CN.yml","hash":"81d73e21402dad729053a3041390435f43136a68","modified":1681899034641},{"_id":"themes/next/languages/zh-TW.yml","hash":"cf0740648725983fb88409d6501876f8b79db41d","modified":1681899034641},{"_id":"themes/next/languages/zh-HK.yml","hash":"92ccee40c234626bf0142152949811ebe39fcef2","modified":1681899034641},{"_id":"themes/next/layout/_layout.swig","hash":"9554bd0f5c5a0438aa7b64065be5561c374d260e","modified":1681899034642},{"_id":"themes/next/layout/archive.swig","hash":"d9bca77f6dcfef71e300a294f731bead11ce199f","modified":1681899034719},{"_id":"themes/next/layout/category.swig","hash":"c546b017a956faaa5f5643c7c8a363af7ac9d6b9","modified":1681899034719},{"_id":"themes/next/layout/page.swig","hash":"357d916694d4c9a0fd1140fa56d3d17e067d8b52","modified":1681899034719},{"_id":"themes/next/layout/tag.swig","hash":"d44ff8755727f6532e86fc9fc8dc631200ffe161","modified":1681899034720},{"_id":"themes/next/layout/index.swig","hash":"8dfd96fb6f833dd5d037de800813105654e8e8e6","modified":1681899034719},{"_id":"themes/next/layout/post.swig","hash":"5f0b5ba2e0a5b763be5e7e96611865e33bba24d7","modified":1681899034720},{"_id":"themes/next/scripts/renderer.js","hash":"e3658eea97b1183ee2e9f676231e53f7994741f6","modified":1681899034745},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"54e6a067ed95268eab6be2ba040a7e9b1907928e","modified":1681899034626},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"a9cfe5ac9ef727a8650b2b6584482751a26b1460","modified":1681899034627},{"_id":"themes/next/docs/ru/README.md","hash":"1e5ddb26ad6f931f8c06ce2120f257ff38b74fdf","modified":1681899034627},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"cb8e39c377fc4a14aaf133b4d1338a48560e9e65","modified":1681899034629},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"3202be9a8d31986caac640e7a4c7ce22e99917eb","modified":1681899034630},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"7e6f227f2aaf30f400d4c065650a4e3d0d61b9e1","modified":1681899034631},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"611f2930c2b281b80543531b1bf33d082531456a","modified":1681899034631},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"50ab381c27611d5bf97bb3907b5ca9998f28187d","modified":1681899034633},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"0d46f9f50cf2e4183970adce705d1041155b0d37","modified":1681899034633},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"2d868cd271d78b08775e28c5b976de8836da4455","modified":1681899034633},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"716111dd36d276f463c707dfcc9937fea2a1cf7a","modified":1681899034633},{"_id":"themes/next/docs/zh-CN/README.md","hash":"8f7c0d0b766024152591d4ccfac715c8e18b37f3","modified":1681899034634},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"b3201934b966bc731eaf8a4dad4ba4bdcd300c10","modified":1681899034634},{"_id":"themes/next/source/css/_colors.styl","hash":"11aef31a8e76f0f332a274a8bfd4537b73d4f88f","modified":1681899034753},{"_id":"themes/next/source/css/_mixins.styl","hash":"072a3fa473c19b20ccd7536a656cda044dbdae0a","modified":1681899034785},{"_id":"themes/next/source/css/main.styl","hash":"815ef30987d02f3d76dbe4b5ee3a72135a152678","modified":1681899034799},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1681899034800},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1681899034829},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1681899034800},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1681899034828},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1681899034829},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1681899034830},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1681899034830},{"_id":"themes/next/source/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1681899034831},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1681899034800},{"_id":"themes/next/source/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1681899034831},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1681899034831},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1681899034831},{"_id":"themes/next/source/js/algolia-search.js","hash":"6a813410e33824d7acc65a369a2983912bb3420c","modified":1681899034832},{"_id":"themes/next/source/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1681899034832},{"_id":"themes/next/source/js/bookmark.js","hash":"9f05fd3672789311dc0cf5b37e40dc654cb04a2a","modified":1681899034833},{"_id":"themes/next/source/js/local-search.js","hash":"cfa6a0f3f9c2bc759ee507668a21f4e8f250f42a","modified":1681899034833},{"_id":"themes/next/source/js/motion.js","hash":"d5aa1a08cdf3c8d1d8d550fb1801274cc41e5874","modified":1681899034833},{"_id":"themes/next/source/js/next-boot.js","hash":"250d8dcd6322e69e3fbadd0f3e37081c97b47c52","modified":1681899034835},{"_id":"themes/next/source/js/utils.js","hash":"26a82e46fdcadc7c3c2c56a7267284b61a26f7f3","modified":1681899034836},{"_id":"themes/next/source/lib/anime.min.js","hash":"960be51132134acd65c2017cc8a5d69cb419a0cd","modified":1681899034836},{"_id":"themes/next/layout/_macro/post.swig","hash":"c3fd56bac90ce45a0c79ddfe68beb223ad0d72b4","modified":1681899034643},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"30ade8c806d7826cc50a4a3e46a9e6213fddf333","modified":1681899034642},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"5bffdb1448caca7db7b1f84e1693e6657a106d50","modified":1681899034643},{"_id":"themes/next/layout/_partials/comments.swig","hash":"142efb4c6b73d8f736f6784804b40d5871333172","modified":1681899034644},{"_id":"themes/next/layout/_partials/footer.swig","hash":"e031914c98f082d918ece4c35fdd0a5be1c4e845","modified":1681899034644},{"_id":"themes/next/layout/_partials/languages.swig","hash":"c3ea82604a5853fb44c5f4e4663cbe912aa5dcf8","modified":1681899034649},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"5392dcbb504266f0f61d5b8219914068ef9cdc25","modified":1681899034655},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"2de77d533c91532a8a4052000244d0c1693370df","modified":1681899034650},{"_id":"themes/next/layout/_scripts/index.swig","hash":"1822eaf55bbb4bec88871c324fc18ad95580ccb4","modified":1681899034656},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"7b9e0f776a5be6c3f95bc7f394e1424ba02ba93b","modified":1681899034656},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"ccff5a773644d33ff22f6b45b6734f52b048f22b","modified":1681899034666},{"_id":"themes/next/layout/_scripts/three.swig","hash":"6b092c6d882b2dfa5273e1b3f60b244cb7c29fcd","modified":1681899034685},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"28b0a7e843ec4365db1963646659a153753cd746","modified":1681899034701},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"244ca2d74ee0d497c87572c6a26b43c62a952673","modified":1681899034686},{"_id":"themes/next/layout/_third-party/index.swig","hash":"c6b63cbc80938e6e09578b8c67e01adf13a9e3bd","modified":1681899034711},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"269102fc5e46bd1ce75abdcce161f0570ae70e2f","modified":1681899034713},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"5ae5adcd6f63ed98b2071e4f7e5e38c4d7d24e1b","modified":1681899034713},{"_id":"themes/next/scripts/events/index.js","hash":"5c355f10fe8c948a7f7cd28bd8120adb7595ebde","modified":1681899034721},{"_id":"themes/next/scripts/helpers/engine.js","hash":"eb6b8bbc1dce4846cd5e0fac0452dbff56d07b5d","modified":1681899034744},{"_id":"themes/next/scripts/helpers/font.js","hash":"8fb1c0fc745df28e20b96222974402aab6d13a79","modified":1681899034744},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"4044129368d0e2811859a9661cad8ab47118bc32","modified":1681899034745},{"_id":"themes/next/scripts/helpers/next-config.js","hash":"b8d7ddfa4baa9b8d6b9066a634aa81c6243beec9","modified":1681899034745},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"ad321db012cea520066deb0639335e9bc0dcc343","modified":1681899034731},{"_id":"themes/next/scripts/filters/locals.js","hash":"a5e7d05d3bd2ae6dcffad5a8ea0f72c6e55dbd02","modified":1681899034732},{"_id":"themes/next/scripts/filters/front-matter.js","hash":"305d03c1e45782988809298c3e3b3c5d5ee438aa","modified":1681899034731},{"_id":"themes/next/scripts/filters/post.js","hash":"57f2d817578dd97e206942604365e936a49854de","modified":1681899034743},{"_id":"themes/next/scripts/filters/minify.js","hash":"21196a48cb127bf476ce598f25f24e8a53ef50c2","modified":1681899034743},{"_id":"themes/next/scripts/tags/button.js","hash":"bb0e8abbc0a6d5b3a1a75a23976f2ac3075aab31","modified":1681899034746},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"840536754121e0da5968f5ad235f29200fc5d769","modified":1681899034746},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"e2d0184bc4a557e1017395b80ff46880078d8537","modified":1681899034747},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"81134494ff0134c0dae1b3815caf6606fccd4e46","modified":1681899034752},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"93ccd3f99d3cb42674f29183c756df63acb5d7f8","modified":1681899034747},{"_id":"themes/next/scripts/tags/note.js","hash":"1fdf4f95810fdb983bfd5ad4c4f13fedd4ea2f8d","modified":1681899034752},{"_id":"themes/next/scripts/tags/pdf.js","hash":"37b53661ad00a01a2ca7d2e4a5ad3a926073f8e2","modified":1681899034752},{"_id":"themes/next/scripts/tags/video.js","hash":"944293fec96e568d9b09bc1280d5dbc9ee1bbd17","modified":1681899034753},{"_id":"themes/next/scripts/tags/tabs.js","hash":"c70a4a66fd0c28c98ccb6c5d5f398972e5574d28","modified":1681899034752},{"_id":"themes/next/scripts/tags/label.js","hash":"fc83f4e1be2c34e81cb79938f4f99973eba1ea60","modified":1681899034751},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"583ff1e7a2ca889f1f54eb0ca793894466823c7c","modified":1681899034797},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"5980abbbbeacd8541121f436fa414d24ad5e97c2","modified":1681899034797},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"c22b58af3327236ec54d5706501aa5a20e15012e","modified":1681899034798},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"4e33774b1fe6d0a51f3a428c54c5e600e83bf154","modified":1681899034799},{"_id":"themes/next/source/css/_variables/base.styl","hash":"ad680efdfb2f86546182bf3f59886efbcf3c1b2d","modified":1681899034799},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"b85a6e2af1387fe64b51e7cd3e2da8616e6f5a3f","modified":1681899034835},{"_id":"themes/next/source/js/schemes/muse.js","hash":"a18559a9c332199efad0100cf84bb0c23fc0f17a","modified":1681899034835},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"bf172816a9c57f9040e3d19c24e181a142daf92b","modified":1681899034842},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"dde584994ac13dc601836e86f4cf490e418d9723","modified":1681899034842},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"91056a6c98cca63ff8cc6956e531ee3faf4b8ad9","modified":1681899034646},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"4baa86ca631168fc6388d27f4b1b501b40c877a8","modified":1681899034647},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"0dd316f153c492c0a03bd0273d50fa322bc81f11","modified":1681899034646},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"bed6cc2b48cf2655036ba39c9bae73a295228a4d","modified":1681899034649},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"90d3eaba6fbe69bee465ddd67c467fd2c0239dc4","modified":1681899034649},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"7d638e413f2548fc990c4a467dd03de6c81fc960","modified":1681899034644},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"90cce9f407e9490756ba99580e3eb09f55b05eaa","modified":1681899034645},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"a6c761d5193cb6f22e9422dbbcf209e05471b0ed","modified":1681899034654},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"98fd1f5df044f4534e1d4ca9ab092ba5761739a9","modified":1681899034654},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"f2eb455c8bf13533427254f0c9b4b17b2498168b","modified":1681899034651},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"128f7d679bb4d53b29203d598d217f029a66dee7","modified":1681899034654},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"ce712c110b5ce8aacba7a86b0558ff89700675c9","modified":1681899034653},{"_id":"themes/next/layout/_partials/post/post-followme.swig","hash":"d8f785c062c6b0763a778bd4a252e6f5fee0e432","modified":1681899034651},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"bc7b047a6246df07767373644b1637d91c3a88b1","modified":1681899034653},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"f349a226e5370075bb6924e60da8b0170c7cfcc1","modified":1681899034653},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"91c0addb33006619faa4c32e5d66874e25f1e9b3","modified":1681899034650},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"8d4e3dd0d3631ce0b21bc15c259f6ac886de631d","modified":1681899034650},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"7b2ef5db9615267a24b884388925de1e9b447c1f","modified":1681899034655},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"34c05e9d73b0f081db70990c296b6d6a0f8ea2ca","modified":1681899034656},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1681899034667},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"0b44f400ec00d2b5add5ee96c11d22465c432376","modified":1681899034667},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1681899034667},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"34495d408e8467555afee489500b8aad98c52079","modified":1681899034684},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"84adaadd83ce447fa9da2cff19006334c9fcbff9","modified":1681899034694},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"b8819bd056f8a580c5556d4415836a906ed5d7a4","modified":1681899034695},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"91c2cb900c76224c5814eeb842d1d5f517f9bf05","modified":1681899034699},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"85b60e222712ca3b2c4dc2039de2dc36b8d82940","modified":1681899034700},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"2642e8aef5afbe23a2a76efdc955dab2ee04ed48","modified":1681899034703},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"fb94ee487d75e484e59b7fba96e989f699ff8a83","modified":1681899034704},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"1b29b99fa921f12c25d3dc95facdf84ef7bb1b5c","modified":1681899034707},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"9298e6d6c4a62a0862fc0f4060ed99779d7b68cb","modified":1681899034706},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"606ad14a29320157df9b8f33738282c51bb393d9","modified":1681899034709},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"a42f97eda3748583bac2253c47fe5dfa54f07b8f","modified":1681899034708},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"3d91899ca079e84d95087b882526d291e6f53918","modified":1681899034710},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"ae2707d6e47582bb470c075649ec7bad86a6d5a9","modified":1681899034711},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"59df21fcfe9d0ada8cee3188cb1075529c1c3eb8","modified":1681899034712},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"276f523e414d4aa7f350a8f2fd3df8a3d8ea9656","modified":1681899034712},{"_id":"themes/next/layout/_third-party/statistics/busuanzi-counter.swig","hash":"d2f0e4c598410ec33785abe302c7ea7492bb791a","modified":1681899034715},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"1f34b2d3c753a3589ab6c462880bd4eb7df09914","modified":1681899034712},{"_id":"themes/next/layout/_third-party/statistics/firestore.swig","hash":"01d94354d07e72cad47100482068b6be69fcc033","modified":1681899034717},{"_id":"themes/next/layout/_third-party/statistics/cnzz-analytics.swig","hash":"53a0760c75d5aaabb3ce8e8aa8e003510d59807f","modified":1681899034716},{"_id":"themes/next/layout/_third-party/statistics/index.swig","hash":"964cd6bac668cf6d211a2624fbef3948cfdece55","modified":1681899034717},{"_id":"themes/next/layout/_third-party/statistics/lean-analytics.swig","hash":"c171ea94e9afbba97f06856904264da331559463","modified":1681899034718},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"619338ddacf01e3df812e66a997e778f672f4726","modified":1681899034718},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"5a223b60406cee7438cfe3a5e41d1284425aa7a5","modified":1681899034718},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"fd726aad77a57b288f07d6998ec29291c67c7cbb","modified":1681899034714},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"aa6ab95b8b76611694613defb4bf25003d1b927f","modified":1681899034715},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"58296a5c1883f26464c2a5ccf734c19f5fbf395a","modified":1681899034714},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"08496b71c9939718e7955704d219e44d7109247b","modified":1681899034722},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"e73f697bb160b223fdde783237148be5f41c1d78","modified":1681899034722},{"_id":"themes/next/scripts/events/lib/config.js","hash":"aefe3b38a22bc155d485e39187f23e4f2ee5680a","modified":1681899034721},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"2f22f48f7370470cef78561a47c2a47c78035385","modified":1681899034723},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"713056d33dbcd8e9748205c5680b456c21174f4e","modified":1681899034723},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"0c3bea89d64bc12c1bbe6f208a83773c6fb5375a","modified":1681899034723},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"323a47df6ded894944a2647db44556d6163e67c4","modified":1681899034730},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"67cf90d9a2428c14eb113a64bdd213c22a019aef","modified":1681899034724},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"3a80559df0b670ccb065ea9d3bb587d0b61be3a4","modified":1681899034723},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"851359f5ff90f733a9bd7fe677edbee8b8ac714c","modified":1681899034731},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"a4f3153ac76a7ffdf6cc70f52f1b2cc218ed393e","modified":1681899034730},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"0534b329d279a6f255112b3305ff92c810f31724","modified":1681899034754},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"510a6f0ba7485dd54ce347cca890ab52c4957081","modified":1681899034754},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"d17236df3b4d6def1e4e81133ef4729c390de3ac","modified":1681899034760},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"c52648a7b09f9fe37858f5694fcc1ffc709ad147","modified":1681899034767},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"a2ee16cac29a82cfce26804c160286fcbee94161","modified":1681899034773},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"7a95c27762e1303bf06ee808c63f616cb192fcaf","modified":1681899034773},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"5540c9259cb7895a5f10a289c7937e5470a7c134","modified":1681899034777},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"45f4badac6ec45cf24355f6157aece1d4d3f1134","modified":1681899034777},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"4b068d0d898f4e624937503f0e1428993050bd65","modified":1681899034778},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"6d740699fb6a7640647a8fd77c4ea4992d8d6437","modified":1681899034781},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"b619f39e18398422e0ac4999d8f042a5eaebe9cd","modified":1681899034781},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"43045d115f8fe95732c446aa45bf1c97609ff2a5","modified":1681899034781},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"f317d2e3886e94f5fbb8781c2e68edd19669ff58","modified":1681899034781},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"20e0e3e3eba384930c022e21511214d244b4c9e7","modified":1681899034784},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"e342b8f8e11a3a6aa5a029912c9778c25bf5d135","modified":1681899034785},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"b9e87d32da24264bda247c1526afe140c858b0ef","modified":1681899034786},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"716e8b0f056bf6393e6bc6969ac84598ab8e7a6f","modified":1681899034786},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"e1c29b81a32273a0dedd926cda199a71aea72624","modified":1681899034788},{"_id":"themes/next/source/css/_schemes/Mist/_layout.styl","hash":"12b265f82840f27112ca2b1be497677f20f87545","modified":1681899034786},{"_id":"themes/next/source/css/_schemes/Pisces/_header.styl","hash":"558794fced306339b98dc2b0ee7f0576802f1355","modified":1681899034792},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"c5142739e01e9f25c8b32b2209af85c787bb2b42","modified":1681899034788},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"5de34e1d8a290751641ae456c942410852d5e809","modified":1681899034792},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"0a9f0d9eb042595502d200fb8c65efb0e6c89aa9","modified":1681899034792},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"b69ac38b9da8c9c1b7de696fdeea7f9d7705213a","modified":1681899034795},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1681899034795},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"dc9318992ce2eb086ebaa2fe56b325e56d24098b","modified":1681899034795},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"4b7f057dbb53efd7cbe7eac7835a793ab3cbb135","modified":1681899034789},{"_id":"themes/next/source/css/_schemes/Muse/_header.styl","hash":"8674bd88df076a1dfe4023ed6750ded1f5b00223","modified":1681899034789},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"9898323ee5a7ac2a5d4f633c653112280beb2643","modified":1681899034791},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"49c76bc723d3952abb613d9d68398ed7305da999","modified":1681899034789},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"25c2a7930da14f023329df20f38df2728057fb4d","modified":1681899034791},{"_id":"themes/next/source/lib/font-awesome/css/all.min.css","hash":"82e34d28f8a1169b20b60101d5bb0446deba3514","modified":1681899034837},{"_id":"themes/next/source/css/_schemes/Muse/_sub-menu.styl","hash":"2d3e05015796a790abd9d68957a5c698c0c9f9b6","modified":1681899034791},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1681899034838},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"236a039b0900f4267de566b46f62314ad967d30f","modified":1681899034760},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"18edddb2ffb3f85a68e4367f81e06c461e07bc25","modified":1681899034761},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"6cf78a379bb656cc0abb4ab80fcae60152ce41ad","modified":1681899034761},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"f6f05f02d50f742c84ee5122016c0563a8bb2cf9","modified":1681899034762},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"97974c231b4659b8aa5e9321c4d54db5c816d0db","modified":1681899034762},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"b87f4a06c0db893df4f756f24be182e1a4751f24","modified":1681899034767},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"bad99f4cccb93b3cefe990a2c85124e60698d32e","modified":1681899034768},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"d83102771df652769e51ddfd041cf5f4ca1a041d","modified":1681899034767},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"8ed7a9d5dfac592de703421b543978095129aa5b","modified":1681899034768},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"1f6b0d3ab227697ca115e57fd61122ea7950e19d","modified":1681899034769},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"a52f8cae599099231866298ed831fdf76c9b6717","modified":1681899034763},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"9af620eba5ccceea21a0e3bc69f6f1fa7637c2f3","modified":1681899034763},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"70b3eb9d36543ab92796ac163544e9cf51b7c1e6","modified":1681899034764},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"97dec98d0403097d66822f1c90b50b2890c84698","modified":1681899034764},{"_id":"themes/next/source/css/_common/components/post/post-followme.styl","hash":"57b9a179675f1536e017cba457b6ac575e397c4f","modified":1681899034764},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"0dfb97703a519d9438f64f9e41ab1dd37381f733","modified":1681899034765},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"2c24829d95c742eb9e8316ebf2fbe9f2c168b59a","modified":1681899034765},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"93ba8172c0d2c37d738e6dbd44fcd5a2e23b92f3","modified":1681899034765},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"66fc406796b6efe6cea76550573b7a632112406a","modified":1681899034765},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"09dda2667628d1f91b2e37d8fc6df1413f961b64","modified":1681899034766},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"5cc9e7394c927065c688cba5edd6e0a27587f1d8","modified":1681899034766},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"b266d2ce5e2b117be01537889e839a69004dc0bb","modified":1681899034766},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"fcd64c23d17775b3635325f6758b648d932e79b5","modified":1681899034766},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"7eeb22c5696f8e0c95161dc57703973cf81c8c12","modified":1681899034769},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"b4f4bae437d4f994af93cf142494ffcd86bae46b","modified":1681899034770},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"b31c86d1a4f89837f9187bed646bda96b2cd286c","modified":1681899034770},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"6d5f26646e2914474f295de8bf6dc327d4acd529","modified":1681899034771},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"300058ca12e81013e77ba01fe66ac210525768b6","modified":1681899034770},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"7a3a56b10ab714c0e2ed240d0939deeecdcad167","modified":1681899034772},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b8c816fba0a9b4a35fbae03ba5b1b2da96ba2687","modified":1681899034772},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"3d16ac0f4ccaeed868c246d4d49bde543d1f62cb","modified":1681899034772},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"49722d555a2edb18094bb2cb3d7336dd72051b93","modified":1681899034774},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"357f825f0a649b2e28cba1481d4c9a0cb402e43a","modified":1681899034774},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"096f908c08ce553e482aadfd3e767a0145191093","modified":1681899034775},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"525242ce9e912c4adfe5134347c67dbdb9e98e3d","modified":1681899034775},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"12f7eaf6b56624cbc411528562d6bb848ff97039","modified":1681899034775},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"fa0a2ea57b7b4ce75b5d18c264af2d92ea3192f9","modified":1681899034776},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"b11b04737a1a0fea3bd9f0081d96ee6c015358d4","modified":1681899034776},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"098b4bdf49c7300490f959386d5d1185a32543f6","modified":1681899034776},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"5d540f683018745a5ed1d6f635df28ea610c1244","modified":1681899034776},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"67a1fcb33535122d41acd24f1f49cf02c89b88fa","modified":1681899034777},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"4079e616fbf36112dec0674c1e0713d1d9769068","modified":1681899034778},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"83bd737f663a8461e66985af8ddbfc0a731fc939","modified":1681899034779},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"c911045b2ce9a66e38d9dd30c7ed078abbc10cbf","modified":1681899034780},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"80488259271bcfe38031f4c2e902463daba9336b","modified":1681899034780},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"ceacfa6218f6084c71a230b086e5d2708d29927e","modified":1681899034782},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"aca7bb220fc14ef2a8f96282d2a95a96a9238d46","modified":1681899034782},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"8b7aafb911850c73074cdb6cc87abe4ac8c12e99","modified":1681899034782},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"adaf0f580fccf4158169eeaf534a18005b39a760","modified":1681899034783},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"03a5bcecc0b12231462ef6ffe432fa77ee71beff","modified":1681899034784},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"3256e39f281f06751a1c0145d9806a0e56d68170","modified":1681899034784},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"51d46fa3c7c6b691c61a2c2b0ac005c97cfbf72b","modified":1681899034784},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1681899034838},{"_id":"themes/next/source/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1681899034841},{"_id":"public/atom.xml","hash":"e17e67b7102579430d12b5a6947448c3c1ed3cd1","modified":1708754946512},{"_id":"public/search.xml","hash":"c2f744c092ff746c1675dd5ed25dda2953c56a55","modified":1708754946512},{"_id":"public/tags/index.html","hash":"f22503db647b82e8d08c42f810fe25e94e709ba7","modified":1708754946512},{"_id":"public/categories/index.html","hash":"259459a528205f513d9859b2dd7ec01a6e0db227","modified":1708754946512},{"_id":"public/archives/index.html","hash":"9d6cd179352c6b9b162721b49a70d25dedb6ad46","modified":1708754946512},{"_id":"public/archives/2022/index.html","hash":"0d8ac19e310bb66d619ede4ee96a21a0e3a15714","modified":1708754946512},{"_id":"public/archives/2022/05/index.html","hash":"3c874d4f9ed2ee353429b205d9fe9ae145a6a31b","modified":1708754946512},{"_id":"public/archives/2023/index.html","hash":"e98dd4d4a44e57fcc1ead24c0f5a82770280b0c3","modified":1708754946512},{"_id":"public/archives/2023/02/index.html","hash":"d4c560f9ee67153455c1a09909fcceb8621dbede","modified":1708754946512},{"_id":"public/archives/2023/04/index.html","hash":"e410176dc2a4423eea5ca6c09a78ea4948f19dd8","modified":1708754946512},{"_id":"public/tags/Mockito/index.html","hash":"16c7652d0286de5a9dac16619661813166b04d86","modified":1708754946512},{"_id":"public/tags/hexo/index.html","hash":"85b716322ec2d46beeaa8515ac208f824e4dc422","modified":1708754946512},{"_id":"public/2023/04/19/hexo的优化和美化/index.html","hash":"e1f6635cb9a536bf2ad140aa664a1c289c1708a9","modified":1708754946512},{"_id":"public/2023/04/19/Mockito实战/index.html","hash":"16ed59b2f79fa51afc6315add02a6ea9ae67a38c","modified":1708754946512},{"_id":"public/index.html","hash":"3cb507fe6228a47c7e6d7a7f422ea995285a41d0","modified":1708754946512},{"_id":"public/2023/02/28/红黑树/index.html","hash":"37692e025ba7df8bb139d393ab56ee8c2cedc042","modified":1708754946512},{"_id":"public/2022/05/25/关于hexo博客的可迁移化改造/index.html","hash":"2dd71666166db32f308ec66a353b426af14663aa","modified":1708754946512},{"_id":"public/images/hexo_next.png","hash":"cb3f16ed956cdd955de97fc018a6884fb7f5e5bb","modified":1681915248349},{"_id":"public/images/algolia_logo.svg","hash":"45eeea0b5fba833e21e38ea10ed5ab385ceb4f01","modified":1681915248349},{"_id":"public/images/cc-by-nc-sa.svg","hash":"6f55543d1fb9cbc436c101d24f802dec7b41efc3","modified":1681915248349},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1681915248349},{"_id":"public/images/cc-by-nc-nd.svg","hash":"bc3588c9b2d7c68830524783120ff6cf957cf668","modified":1681915248349},{"_id":"public/images/cc-by-nc.svg","hash":"6f076713fb9bf934aa2c1046bdf2cf2e37bc1eab","modified":1681915248349},{"_id":"public/images/cc-by-nd.svg","hash":"42cd73da328077ccc92f859bb8f3cf621b3484f8","modified":1681915248349},{"_id":"public/images/cc-by-sa.svg","hash":"70c1535f43e54e5ff35ca81419e77e4c0c301398","modified":1681915248349},{"_id":"public/images/cc-by.svg","hash":"e92a33c32d1dac8ed94849b2b4e6456e887efe70","modified":1681915248349},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1681915248349},{"_id":"public/images/cc-zero.svg","hash":"9bfb52b2f63527a7049247bf00d44e6dc1170e7d","modified":1681915248349},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1681915248349},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1681915248349},{"_id":"public/images/logo.svg","hash":"169f56fd82941591dad3abd734a50ec7259be950","modified":1681915248349},{"_id":"public/lib/font-awesome/webfonts/fa-regular-400.woff2","hash":"260bb01acd44d88dcb7f501a238ab968f86bef9e","modified":1681915248349},{"_id":"public/css/prism.css","hash":"25c7ccb3364d3f04913f4984e7946769d0a3c857","modified":1681915248349},{"_id":"public/js/bookmark.js","hash":"9734ebcb9b83489686f5c2da67dc9e6157e988ad","modified":1681915248349},{"_id":"public/js/algolia-search.js","hash":"498d233eb5c7af6940baf94c1a1c36fdf1dd2636","modified":1681915248349},{"_id":"public/js/local-search.js","hash":"35ccf100d8f9c0fd6bfbb7fa88c2a76c42a69110","modified":1681915248349},{"_id":"public/js/motion.js","hash":"72df86f6dfa29cce22abeff9d814c9dddfcf13a9","modified":1681915248349},{"_id":"public/js/next-boot.js","hash":"a1b0636423009d4a4e4cea97bcbf1842bfab582c","modified":1681915248349},{"_id":"public/js/utils.js","hash":"730cca7f164eaf258661a61ff3f769851ff1e5da","modified":1681915248349},{"_id":"public/js/schemes/pisces.js","hash":"0ac5ce155bc58c972fe21c4c447f85e6f8755c62","modified":1681915248349},{"_id":"public/js/schemes/muse.js","hash":"1eb9b88103ddcf8827b1a7cbc56471a9c5592d53","modified":1681915248349},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1681915248349},{"_id":"public/css/main.css","hash":"8f5c6b592d45c6289ac717d6daa9d2e2491828a4","modified":1681915248349},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1681915248349},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1681915248349},{"_id":"public/lib/font-awesome/css/all.min.css","hash":"0038dc97c79451578b7bd48af60ba62282b4082b","modified":1681915248349},{"_id":"public/lib/font-awesome/webfonts/fa-brands-400.woff2","hash":"509988477da79c146cb93fb728405f18e923c2de","modified":1681915248349},{"_id":"public/lib/font-awesome/webfonts/fa-solid-900.woff2","hash":"75a88815c47a249eadb5f0edc1675957f860cca7","modified":1681915248349},{"_id":"source/_drafts/Java-web工程的Jar包启动以及一下要注意的问题.md","hash":"257610056208a51e7ca4af69e52e6abbe64343a3","modified":1708754724457},{"_id":"source/_posts/Java-web工程的Jar包启动以及一下要注意的问题.md","hash":"257610056208a51e7ca4af69e52e6abbe64343a3","modified":1708754736781},{"_id":"public/archives/2024/index.html","hash":"e8d79aeed2bb06ab5883abd87ca3da6dfa8bea5f","modified":1708754946512},{"_id":"public/archives/2024/02/index.html","hash":"511f747d68c3daa51a870fedb3416a537f78c622","modified":1708754946512},{"_id":"public/2024/02/24/Java-web工程的Jar包启动以及一下要注意的问题/index.html","hash":"2405b174534b0897f32da2a19850fa7ef6083ff3","modified":1708754946512}],"Category":[],"Data":[],"Page":[{"title":"categories","date":"2023-04-19T09:01:16.000Z","type":"categories","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2023-04-19 17:01:16\ntype: \"categories\"\n---\n","updated":"2023-04-19T10:10:34.574Z","path":"categories/index.html","comments":1,"layout":"page","_id":"clgnsww0f0000i4vcdym6c0i7","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"tags","date":"2023-04-19T09:04:58.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2023-04-19 17:04:58\ntype: \"tags\"\n---\n","updated":"2023-04-19T10:10:34.575Z","path":"tags/index.html","comments":1,"layout":"page","_id":"clgnsww0n0002i4vc0ayu6rgq","content":"","site":{"data":{}},"excerpt":"","more":""}],"Post":[{"title":"Mockito实战","author":"ZP","date":"2023-04-19T08:40:35.000Z","sticky":true,"_content":"为什么要有个Mockito，本身Junit就可以做单元测试，为什么还要加一个Mcokito作为单元测试框架。\n\n实际上两者不矛盾，甚至两者是搭配着使用的，确切的说Mockito是一个单元测试模拟框架，来帮助发现隐藏bug，提高代码质量。为什么会有这样的作用呢，具体一点的实践场景都有哪些？\n\n首先Mockito注重的是一个模拟，本身mock本意就有模仿假装的意思在里面，假设我们的代码需要跟第三方联调，我们需要人家给我们数据，设置前置条件。实际工作中就知道，工作本身可能不太难，但是和人交流协同有时候更消耗时间。那我们可不可以模拟“别人”，给我们提供我们设想的数据，这样我们就不用看别人“眼色”。\n\n还有一种就是我们需要考虑各种测试场景，这里避免不了各种脏数据产生，导致测试环境什么样的数据都有，这些脏数据可能会影响后面的测试，我们可以模拟各种场景，不产生脏数据。\n\n##### TDD测试驱动开发\n首先我们要理解一个概念先，首先并不是什么代码都可以很方便的单元测试。这也是为什么我们不太愿意写单元测试的原因之一，麻烦觉得没意义。\n\n但是我们如果要理解一个概念TDD测试驱动开发，去理解写代码，能提高我们对需求的理解和提高代码的可维护性。以下是TDD的官方表述：\n```\nTDD（Test-Driven Development，测试驱动开发）是一种软件开发方法，它强调在编写代码之前先编写测试用例，然后只编写足够的代码使测试用例通过。TDD的基本思想是：先写测试，再写代码，然后重构代码，以确保代码的正确性和可维护性。\n\nTDD的流程通常被称为红-绿-重构（Red-Green-Refactor）：\n\n红：编写测试用例，运行测试用例，测试用例失败（红色）。\n\n绿：编写足够的代码使测试用例通过，运行测试用例，测试用例通过（绿色）。\n\n重构：重构代码，以提高代码的质量和可维护性，然后重新运行测试用例，确保测试用例仍然通过。\n\nTDD的目标是通过测试来驱动开发，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。TDD还可以帮助开发人员更好地理解需求，促进团队协作，提高系统稳定性。\n```\n\n试想一下，我们重构代码，对应的测试案例在maven构建时自动处理（前提是比不要把测试的给屏蔽了），能不能通过，构建的时候就走了一遍。\n\n同样在编写的时候，我们考虑到测试，做到将需求明确和逻辑梳理，把各个场景考虑清楚，避免过度测试，因为有时候很多地方测试测的时候，会出现很多重复测试某个场景。\n\n##### Mockito基础\n在理解TDD的概念，我们可以借助Mockito来帮助我们完善单元测试，可以帮助哦我们去模拟各种场景，各种参数。\n\n```\n在工程中使用 Mockito，需要按照以下步骤：\n\n添加 Mockito 依赖项：在项目的构建文件中添加 Mockito 的依赖项，例如使用 Maven 的项目，在 pom.xml 文件中添加以下依赖项：\n\n<dependency>\n    <groupId>org.mockito</groupId>\n    <artifactId>mockito-core</artifactId>\n    <version>3.12.4</version>\n    <scope>test</scope>\n</dependency>\n创建测试用例：创建一个测试类，并在类中添加测试方法。使用 @Test 注解标记测试方法。\n\n创建模拟对象：在测试方法中，使用 Mockito.mock() 方法创建一个模拟对象。例如：\n\n// 创建一个模拟对象\nList<String> mockedList = Mockito.mock(List.class);\n设置模拟对象的行为：使用 Mockito.when() 方法设置模拟对象的行为。例如：\n\n// 设置模拟对象的行为\nMockito.when(mockedList.get(0)).thenReturn(\"first\");\n运行测试：使用 JUnit 运行测试用例，例如使用 @RunWith 注解和 @Test 注解。例如：\n\n// 运行测试用例\n@RunWith(MockitoJUnitRunner.class)\npublic class MyTest {\n    @Test\n    public void testMethod() {\n        // 测试方法中使用模拟对象\n        List<String> mockedList = Mockito.mock(List.class);\n        Mockito.when(mockedList.get(0)).thenReturn(\"first\");\n        assertEquals(\"first\", mockedList.get(0));\n    }\n}\n以上是使用 Mockito 的基本步骤，可以根据具体的测试场景和要求，使用 Mockito 提供的其他 API 和功能，例如验证模拟对象的方法调用次数、设置模拟对象的默认行为等。\n```\n\n以上只是一个大致的步骤，实际上我们使用的时候，肯定要比这复杂得多，举个例子，我们的一个service类，里面有很多依赖需要注入的bean，有的是数据库DAO层，有的是别的component。这时候我们该怎么做，怎么改来实现我们的预想目标。\n\n##### Mockito实战\n接上面，首先我们写的一些业务代码，由于设计不好，写的像一条“布”，一样一步一步去写，由于业务的不断修改，就变得又臭又长的“布”。首先我们需要把代码写好，做好设计，如果你对一个很复杂的做接口测试，你会发现涉及到的东西太多，Mock了一大堆，场景复杂自己都不知道该如何是好。\n\n######  (1)编写代码\n第一步就是编写好代码，除了新写，也包括改造重构\n\n对于TDD代码的要求\n```\nTDD（测试驱动开发）对代码设计的要求主要包括以下几个方面：\n\n可测试性：代码必须易于测试，即能够轻松地编写测试用例并进行测试。为了实现可测试性，代码应该遵循良好的编码规范和设计原则，例如单一职责原则、开闭原则、依赖倒置原则等。\n\n可扩展性：代码必须易于扩展，即能够轻松地添加新的功能或修改现有的功能，而不会影响现有的功能或导致代码重构。为了实现可扩展性，代码应该遵循良好的设计模式和架构模式，例如工厂模式、策略模式、MVC模式等。\n\n可维护性：代码必须易于维护，即能够轻松地修改和更新代码，而不会影响现有的功能或导致代码重构。为了实现可维护性，代码应该遵循良好的编码规范和设计原则，例如代码重构、注释、命名规范等。\n\n可重用性：代码必须易于重用，即能够轻松地将代码移植到其他项目或模块中，从而提高代码的复用性和可维护性。为了实现可重用性，代码应该遵循良好的设计模式和架构模式，例如模板方法模式、适配器模式、代理模式等。\n\n总之，TDD要求代码具有良好的可测试性、可扩展性、可维护性和可重用性，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。\n```\n\n###### （2）Mock注解的使用 \n\n在代码写好后，我们要去测试，我们要利用Mockito来模拟对应的对象。\n\n创建 Mock 对象的语法为 mock(class or interface)。\n\n```\nmock(Class classToMock);\n mock(Class classToMock, String name)\n mock(Class classToMock, Answer defaultAnswer)\n mock(Class classToMock, MockSettings mockSettings)\n mock(Class classToMock, ReturnValues returnValues)\n```\n或者\n```\n @Mock\n    private MaterialAllocateOrderMapper materialAllocateOrderMapper;\n\n    @Mock\n    private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;\n```\n\n我们实际工作中会出现AService依赖BService，这种情况怎么处理呢？\n\n实际上我们这里要模拟的是BService，需要自动注入模拟对象，这里我们就用到@InjectMocks注解。\n\n\n```\n    @Mock\n    private MaterialAllocateOrderMapper materialAllocateOrderMapper;\n\n    @Mock\n    private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;\n\n    @InjectMocks\n    private MaterialAllocateOrderSupport orderStatusBuildRequest;\n```\n设置对象调用的预期返回值\n\n原则上我们mock的对象，没有设置默认或者于其返回值，调用里面的方法，什么忙都不会做，但实际上我们需要他们“返回”一些我们需要的东西，这就是要设置预期返回值。\n\n通过 when(mock.someMethod()).thenReturn(value) 来设定 Mock 对象某个方法调用时的返回值。\n\n```\n    @Test\n    public void testBuildOrderStatusRequest() {\n       handleTestBuildOrderStatusRequest();\n    }\n\n\n    private OrderStatusBuildRequest handleTestBuildOrderStatusRequest() {\n\n        // 设置模拟的方法调用返回值\n        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);\n        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);\n\n        // 调用被测试的方法\n//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);\n        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 0);\n\n        // 断言返回值是否符合预期\n        Integer status = result.getStatus();\n        Assert.assertTrue(result!=null);\n\n        return result;\n    }\n```\n\n但是有时候我们需要给定一些值，作为条件，比如我们模拟用户，首先要把用户信息先给进去，这里我们直接用@Before注解就可以\n\n\n`@Before` 是 JUnit 框架提供的一个注解，用于标记在每个测试方法执行之前需要执行的方法。通常，在测试方法执行之前需要进行一些初始化操作，例如创建对象、初始化变量等。使用 `@Before` 注解可以将这些初始化操作封装到一个方法中，并在每个测试方法执行之前自动执行。\n\n使用 `@Before` 注解时，需要满足以下条件：\n\n1. 被测试类中需要有一个方法，它使用 `@Before` 注解进行标记。\n\n2. `@Before` 注解标记的方法必须是公共方法（public），没有参数，并且没有返回值。\n\n3. `@Before` 注解标记的方法会在每个测试方法执行之前自动执行。\n\n例如：\n\n```java\npublic class MyTest {\n    private MyObject myObject;\n\n    @Before\n    public void setUp() {\n        myObject = new MyObject();\n    }\n\n    @Test\n    public void testMethod1() {\n        // 测试方法1\n    }\n\n    @Test\n    public void testMethod2() {\n        // 测试方法2\n    }\n}\n```\n\n在上面的例子中，`MyTest` 类中有一个 `setUp()` 方法，它使用 `@Before` 注解进行标记。在 `setUp()` 方法中，创建了一个 `MyObject` 对象，并将其赋值给 `myObject` 属性。在测试方法中，可以使用 `myObject` 属性进行测试。\n\n使用 `@Before` 注解可以将测试方法中的重复代码提取到一个公共的方法中，避免代码重复，提高测试代码的可读性和可维护性。\n\n\n下面我发一下具体的代码demo\n```java\n\n\n    @Mock\n    private MaterialAllocateOrderMapper materialAllocateOrderMapper;\n\n    @Mock\n    private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;\n\n    @InjectMocks\n    private MaterialAllocateOrderSupport orderStatusBuildRequest;\n\n    @Mock\n    private MaterialAllocateOutStorageStatusService statusService;\n\n    @Mock\n    private OutStorageMapper outStorageMapper;\n\n    @Mock\n    private OutStorageDetailMapper outStorageDetailMapper;\n\n    private AllocateOrderDO allocateOrderDO;\n\n    private List<AllocateOrderDetailDO> detailDOList;\n\n    private OrderStatusBuildRequest testRequest;\n\n    private List<OrderDetailStatusBuildRequest> requestDetailList;\n\n    private OutStorageDO outStorageDO;\n\n    List<OutStorageDetailDO> outStorageDetailDOList;\n\n    @Before\n    public void setUp() {\n        MockitoAnnotations.initMocks(this);\n\n        allocateOrderDO = new AllocateOrderDO();\n        allocateOrderDO.setId(1L);\n        allocateOrderDO.setAllocateOrderNo(\"123\");\n        allocateOrderDO.setMerchantId(1L);\n\n        AllocateOrderDetailDO detailDO1 = new AllocateOrderDetailDO();\n        detailDO1.setId(11L);\n        detailDO1.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO1.setAllocateOrderNo(\"123\");\n        detailDO1.setOutStorageDetailId(21L);\n        detailDO1.setOutStorageId(2L);\n\n        AllocateOrderDetailDO detailDO2 = new AllocateOrderDetailDO();\n        detailDO2.setId(12L);\n        detailDO2.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO2.setAllocateOrderNo(\"123\");\n        detailDO2.setOutStorageDetailId(22L);\n        detailDO2.setOutStorageId(2L);\n\n        AllocateOrderDetailDO detailDO3 = new AllocateOrderDetailDO();\n        detailDO3.setId(13L);\n        detailDO3.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO3.setAllocateOrderNo(\"123\");\n        detailDO3.setOutStorageDetailId(23L);\n        detailDO3.setOutStorageId(2L);\n\n        AllocateOrderDetailDO detailDO4 = new AllocateOrderDetailDO();\n        detailDO4.setId(14L);\n        detailDO4.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO4.setAllocateOrderNo(\"123\");\n        detailDO4.setOutStorageDetailId(24L);\n        detailDO4.setOutStorageId(2L);\n\n        detailDOList = new ArrayList<>();\n        detailDOList.add(detailDO1);\n        detailDOList.add(detailDO2);\n        detailDOList.add(detailDO3);\n        detailDOList.add(detailDO4);\n\n\n\n        ////以下是测试状态转换的预处理\n//        testRequest = new OrderStatusBuildRequest();\n//        testRequest.setOrderType(OrderType.MATERIAL_ALLOCATE);\n//        testRequest.setOrderStatus();\n//        testRequest.setOrderOperateType();\n//        testRequest.setNeedApproval();\n//        testRequest.setApproval();\n//        testRequest.setOrderId();\n//        testRequest.setStatus();\n//\n//        requestDetailList = new ArrayList<>();\n//\n//        OrderDetailStatusBuildRequest detailRequest1 = new OrderDetailStatusBuildRequest();\n//        detailRequest1.setOrderType();\n//        detailRequest1.setOrderStatus();\n//        detailRequest1.setOrderOperateType();\n//        detailRequest1.setNeedApproval();\n//        detailRequest1.setApproval();\n//        detailRequest1.setStatus();\n//        requestDetailList.add(detailRequest1);\n//\n//        OrderDetailStatusBuildRequest detailRequest2 = new OrderDetailStatusBuildRequest();\n//        requestDetailList.add(detailRequest2);\n\n         outStorageDO = new OutStorageDO();\n         outStorageDO.setId(2L);\n\n\n        outStorageDetailDOList = new ArrayList<>();\n        OutStorageDetailDO outStorageDetailDO1 = new OutStorageDetailDO();\n        outStorageDetailDO1.setId(21L);\n        outStorageDetailDO1.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO1);\n\n        OutStorageDetailDO outStorageDetailDO2 = new OutStorageDetailDO();\n        outStorageDetailDO2.setId(22L);\n        outStorageDetailDO2.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO2);\n\n        OutStorageDetailDO outStorageDetailDO3 = new OutStorageDetailDO();\n        outStorageDetailDO3.setId(23L);\n        outStorageDetailDO3.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO3);\n\n        OutStorageDetailDO outStorageDetailDO4 = new OutStorageDetailDO();\n        outStorageDetailDO4.setId(24L);\n        outStorageDetailDO4.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO4);\n\n\n\n    }\n\n    @Test\n    public void testBuildOrderStatusRequest() {\n       handleTestBuildOrderStatusRequest();\n    }\n\n\n    private OrderStatusBuildRequest handleTestBuildOrderStatusRequest() {\n\n        // 设置模拟的方法调用返回值\n        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);\n        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);\n\n        // 调用被测试的方法\n//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);\n        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 0);\n\n        // 断言返回值是否符合预期\n        Integer status = result.getStatus();\n        Assert.assertTrue(result!=null);\n\n        return result;\n    }\n\n\n    /**\n     * 测试调拨单出库状态转换，以下情景：\n     * （1）要审批        outStorageStatus = 2\n     *\n     * （2）不要审批：调拨详情都是待确认   outStorageStatus = 11\n     * （3）不要审批：调拨详情都是已完成   outStorageStatus = 1\n     * （4）不要审批：调拨详情都是已取消    outStorageStatus = 6\n     * （5）不要审批：调拨详情都是已驳回    outStorageStatus = 6\n     * （6）不要审批：调拨详情已完成，已取消，已驳回，待确认 outStorageStatus = 11\n     * （7）不要审批：调拨详情已完成，待确认  outStorageStatus = 11\n     * （8）不要审批：调拨详情已取消，待确认  outStorageStatus = 11\n     * （9）不要审批：调拨详情已取消，已完成  outStorageStatus = 1\n     * （10）不要审批：审批驳回  outStorageStatus = 9\n     * （11）不要审批：审批撤销\n     *\n     */\n    @Test\n    public void testHandleMaterialAllocateOrderOutStorageStatus() {\n\n\n        typeDetailDOListWithOutApproval(11);\n\n        OrderStatusBuildRequest request = handleTestBuildOrderStatusRequest();\n\n        statusService.getStatus(request);\n\n        when(outStorageMapper.findById(anyLong())).thenReturn(outStorageDO);\n        when(outStorageDetailMapper.findByOutStorageId(anyLong())).thenReturn(outStorageDetailDOList);\n        when(materialAllocateOrderDetailMapper.selectList(any())).thenReturn(detailDOList);\n\n\n        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);\n        when(outStorageDetailMapper.updateBatchById(anyList())).thenReturn(1);\n\n        orderStatusBuildRequest.handleMaterialAllocateOrderOutStorageStatus(request, 2L);\n\n\n        verify(statusService).getStatus(eq(request));\n//        verify(outStorageMapper).findById(eq(outStorageId));\n//        verify(outStorageDetailMapper).findByOutStorageId(eq(outStorageId));\n//        verify(orderStatus).findDetailByDetailIdList(anyList(), eq(outStorageDO.getMerchantId()));\n//        verify(outStorageMapper).updateById(eq(outStorageDO));\n//        verify(outStorageDetailMapper).updateBatchById(eq(outStorageDetailDOList));\n    }\n\n\n    /**\n     * 不审批场景类型\n     * @param type\n     * @return\n     */\n    private List<AllocateOrderDetailDO> typeDetailDOListWithOutApproval(Integer type) {\n\n        List<AllocateOrderDetailDO> handleDetailDOList = detailDOList;\n        //2 不要审批：调拨详情都是待确认\n        if (type == 2) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n            }\n        }\n\n        //3不要审批：调拨详情都是已完成   outStorageStatus = 11\n        else if (type == 3) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            }\n        }\n        //4 不要审批：调拨详情都是已取消\n        else if (type == 4) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            }\n        }\n\n        //（5）不要审批：调拨详情都是已驳回\n        else if (type == 5) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.REJECT.getValue());\n            }\n        }\n        //6不要审批：调拨详情已完成，已取消，已驳回，待确认\n        else if (type == 6) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.REJECT.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        }\n\n        // 7 不要审批：调拨详情已完成，待确认\n        else if (type == 7) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        }\n        // 8 不要审批：调拨详情已取消，待确认\n        else if (type == 8) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        }\n\n        //9 不要审批：调拨详情已取消，已完成\n        else if (type == 9) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n        }\n\n        //10不要审批：审批驳回\n        else if (type == 10) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REJECT.getValue());\n            }\n        }\n        // 11 不要审批：审批撤销\n        else if (type == 11) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REVOKE.getValue());\n            }\n        }\n        return handleDetailDOList;\n    }\n\n```","source":"_posts/Mockito实战.md","raw":"title: Mockito实战\nauthor: ZP\ndate: 2023-04-19 16:40:35\ntags: Mockito\nsticky: true\n---\n为什么要有个Mockito，本身Junit就可以做单元测试，为什么还要加一个Mcokito作为单元测试框架。\n\n实际上两者不矛盾，甚至两者是搭配着使用的，确切的说Mockito是一个单元测试模拟框架，来帮助发现隐藏bug，提高代码质量。为什么会有这样的作用呢，具体一点的实践场景都有哪些？\n\n首先Mockito注重的是一个模拟，本身mock本意就有模仿假装的意思在里面，假设我们的代码需要跟第三方联调，我们需要人家给我们数据，设置前置条件。实际工作中就知道，工作本身可能不太难，但是和人交流协同有时候更消耗时间。那我们可不可以模拟“别人”，给我们提供我们设想的数据，这样我们就不用看别人“眼色”。\n\n还有一种就是我们需要考虑各种测试场景，这里避免不了各种脏数据产生，导致测试环境什么样的数据都有，这些脏数据可能会影响后面的测试，我们可以模拟各种场景，不产生脏数据。\n\n##### TDD测试驱动开发\n首先我们要理解一个概念先，首先并不是什么代码都可以很方便的单元测试。这也是为什么我们不太愿意写单元测试的原因之一，麻烦觉得没意义。\n\n但是我们如果要理解一个概念TDD测试驱动开发，去理解写代码，能提高我们对需求的理解和提高代码的可维护性。以下是TDD的官方表述：\n```\nTDD（Test-Driven Development，测试驱动开发）是一种软件开发方法，它强调在编写代码之前先编写测试用例，然后只编写足够的代码使测试用例通过。TDD的基本思想是：先写测试，再写代码，然后重构代码，以确保代码的正确性和可维护性。\n\nTDD的流程通常被称为红-绿-重构（Red-Green-Refactor）：\n\n红：编写测试用例，运行测试用例，测试用例失败（红色）。\n\n绿：编写足够的代码使测试用例通过，运行测试用例，测试用例通过（绿色）。\n\n重构：重构代码，以提高代码的质量和可维护性，然后重新运行测试用例，确保测试用例仍然通过。\n\nTDD的目标是通过测试来驱动开发，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。TDD还可以帮助开发人员更好地理解需求，促进团队协作，提高系统稳定性。\n```\n\n试想一下，我们重构代码，对应的测试案例在maven构建时自动处理（前提是比不要把测试的给屏蔽了），能不能通过，构建的时候就走了一遍。\n\n同样在编写的时候，我们考虑到测试，做到将需求明确和逻辑梳理，把各个场景考虑清楚，避免过度测试，因为有时候很多地方测试测的时候，会出现很多重复测试某个场景。\n\n##### Mockito基础\n在理解TDD的概念，我们可以借助Mockito来帮助我们完善单元测试，可以帮助哦我们去模拟各种场景，各种参数。\n\n```\n在工程中使用 Mockito，需要按照以下步骤：\n\n添加 Mockito 依赖项：在项目的构建文件中添加 Mockito 的依赖项，例如使用 Maven 的项目，在 pom.xml 文件中添加以下依赖项：\n\n<dependency>\n    <groupId>org.mockito</groupId>\n    <artifactId>mockito-core</artifactId>\n    <version>3.12.4</version>\n    <scope>test</scope>\n</dependency>\n创建测试用例：创建一个测试类，并在类中添加测试方法。使用 @Test 注解标记测试方法。\n\n创建模拟对象：在测试方法中，使用 Mockito.mock() 方法创建一个模拟对象。例如：\n\n// 创建一个模拟对象\nList<String> mockedList = Mockito.mock(List.class);\n设置模拟对象的行为：使用 Mockito.when() 方法设置模拟对象的行为。例如：\n\n// 设置模拟对象的行为\nMockito.when(mockedList.get(0)).thenReturn(\"first\");\n运行测试：使用 JUnit 运行测试用例，例如使用 @RunWith 注解和 @Test 注解。例如：\n\n// 运行测试用例\n@RunWith(MockitoJUnitRunner.class)\npublic class MyTest {\n    @Test\n    public void testMethod() {\n        // 测试方法中使用模拟对象\n        List<String> mockedList = Mockito.mock(List.class);\n        Mockito.when(mockedList.get(0)).thenReturn(\"first\");\n        assertEquals(\"first\", mockedList.get(0));\n    }\n}\n以上是使用 Mockito 的基本步骤，可以根据具体的测试场景和要求，使用 Mockito 提供的其他 API 和功能，例如验证模拟对象的方法调用次数、设置模拟对象的默认行为等。\n```\n\n以上只是一个大致的步骤，实际上我们使用的时候，肯定要比这复杂得多，举个例子，我们的一个service类，里面有很多依赖需要注入的bean，有的是数据库DAO层，有的是别的component。这时候我们该怎么做，怎么改来实现我们的预想目标。\n\n##### Mockito实战\n接上面，首先我们写的一些业务代码，由于设计不好，写的像一条“布”，一样一步一步去写，由于业务的不断修改，就变得又臭又长的“布”。首先我们需要把代码写好，做好设计，如果你对一个很复杂的做接口测试，你会发现涉及到的东西太多，Mock了一大堆，场景复杂自己都不知道该如何是好。\n\n######  (1)编写代码\n第一步就是编写好代码，除了新写，也包括改造重构\n\n对于TDD代码的要求\n```\nTDD（测试驱动开发）对代码设计的要求主要包括以下几个方面：\n\n可测试性：代码必须易于测试，即能够轻松地编写测试用例并进行测试。为了实现可测试性，代码应该遵循良好的编码规范和设计原则，例如单一职责原则、开闭原则、依赖倒置原则等。\n\n可扩展性：代码必须易于扩展，即能够轻松地添加新的功能或修改现有的功能，而不会影响现有的功能或导致代码重构。为了实现可扩展性，代码应该遵循良好的设计模式和架构模式，例如工厂模式、策略模式、MVC模式等。\n\n可维护性：代码必须易于维护，即能够轻松地修改和更新代码，而不会影响现有的功能或导致代码重构。为了实现可维护性，代码应该遵循良好的编码规范和设计原则，例如代码重构、注释、命名规范等。\n\n可重用性：代码必须易于重用，即能够轻松地将代码移植到其他项目或模块中，从而提高代码的复用性和可维护性。为了实现可重用性，代码应该遵循良好的设计模式和架构模式，例如模板方法模式、适配器模式、代理模式等。\n\n总之，TDD要求代码具有良好的可测试性、可扩展性、可维护性和可重用性，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。\n```\n\n###### （2）Mock注解的使用 \n\n在代码写好后，我们要去测试，我们要利用Mockito来模拟对应的对象。\n\n创建 Mock 对象的语法为 mock(class or interface)。\n\n```\nmock(Class classToMock);\n mock(Class classToMock, String name)\n mock(Class classToMock, Answer defaultAnswer)\n mock(Class classToMock, MockSettings mockSettings)\n mock(Class classToMock, ReturnValues returnValues)\n```\n或者\n```\n @Mock\n    private MaterialAllocateOrderMapper materialAllocateOrderMapper;\n\n    @Mock\n    private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;\n```\n\n我们实际工作中会出现AService依赖BService，这种情况怎么处理呢？\n\n实际上我们这里要模拟的是BService，需要自动注入模拟对象，这里我们就用到@InjectMocks注解。\n\n\n```\n    @Mock\n    private MaterialAllocateOrderMapper materialAllocateOrderMapper;\n\n    @Mock\n    private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;\n\n    @InjectMocks\n    private MaterialAllocateOrderSupport orderStatusBuildRequest;\n```\n设置对象调用的预期返回值\n\n原则上我们mock的对象，没有设置默认或者于其返回值，调用里面的方法，什么忙都不会做，但实际上我们需要他们“返回”一些我们需要的东西，这就是要设置预期返回值。\n\n通过 when(mock.someMethod()).thenReturn(value) 来设定 Mock 对象某个方法调用时的返回值。\n\n```\n    @Test\n    public void testBuildOrderStatusRequest() {\n       handleTestBuildOrderStatusRequest();\n    }\n\n\n    private OrderStatusBuildRequest handleTestBuildOrderStatusRequest() {\n\n        // 设置模拟的方法调用返回值\n        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);\n        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);\n\n        // 调用被测试的方法\n//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);\n        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 0);\n\n        // 断言返回值是否符合预期\n        Integer status = result.getStatus();\n        Assert.assertTrue(result!=null);\n\n        return result;\n    }\n```\n\n但是有时候我们需要给定一些值，作为条件，比如我们模拟用户，首先要把用户信息先给进去，这里我们直接用@Before注解就可以\n\n\n`@Before` 是 JUnit 框架提供的一个注解，用于标记在每个测试方法执行之前需要执行的方法。通常，在测试方法执行之前需要进行一些初始化操作，例如创建对象、初始化变量等。使用 `@Before` 注解可以将这些初始化操作封装到一个方法中，并在每个测试方法执行之前自动执行。\n\n使用 `@Before` 注解时，需要满足以下条件：\n\n1. 被测试类中需要有一个方法，它使用 `@Before` 注解进行标记。\n\n2. `@Before` 注解标记的方法必须是公共方法（public），没有参数，并且没有返回值。\n\n3. `@Before` 注解标记的方法会在每个测试方法执行之前自动执行。\n\n例如：\n\n```java\npublic class MyTest {\n    private MyObject myObject;\n\n    @Before\n    public void setUp() {\n        myObject = new MyObject();\n    }\n\n    @Test\n    public void testMethod1() {\n        // 测试方法1\n    }\n\n    @Test\n    public void testMethod2() {\n        // 测试方法2\n    }\n}\n```\n\n在上面的例子中，`MyTest` 类中有一个 `setUp()` 方法，它使用 `@Before` 注解进行标记。在 `setUp()` 方法中，创建了一个 `MyObject` 对象，并将其赋值给 `myObject` 属性。在测试方法中，可以使用 `myObject` 属性进行测试。\n\n使用 `@Before` 注解可以将测试方法中的重复代码提取到一个公共的方法中，避免代码重复，提高测试代码的可读性和可维护性。\n\n\n下面我发一下具体的代码demo\n```java\n\n\n    @Mock\n    private MaterialAllocateOrderMapper materialAllocateOrderMapper;\n\n    @Mock\n    private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;\n\n    @InjectMocks\n    private MaterialAllocateOrderSupport orderStatusBuildRequest;\n\n    @Mock\n    private MaterialAllocateOutStorageStatusService statusService;\n\n    @Mock\n    private OutStorageMapper outStorageMapper;\n\n    @Mock\n    private OutStorageDetailMapper outStorageDetailMapper;\n\n    private AllocateOrderDO allocateOrderDO;\n\n    private List<AllocateOrderDetailDO> detailDOList;\n\n    private OrderStatusBuildRequest testRequest;\n\n    private List<OrderDetailStatusBuildRequest> requestDetailList;\n\n    private OutStorageDO outStorageDO;\n\n    List<OutStorageDetailDO> outStorageDetailDOList;\n\n    @Before\n    public void setUp() {\n        MockitoAnnotations.initMocks(this);\n\n        allocateOrderDO = new AllocateOrderDO();\n        allocateOrderDO.setId(1L);\n        allocateOrderDO.setAllocateOrderNo(\"123\");\n        allocateOrderDO.setMerchantId(1L);\n\n        AllocateOrderDetailDO detailDO1 = new AllocateOrderDetailDO();\n        detailDO1.setId(11L);\n        detailDO1.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO1.setAllocateOrderNo(\"123\");\n        detailDO1.setOutStorageDetailId(21L);\n        detailDO1.setOutStorageId(2L);\n\n        AllocateOrderDetailDO detailDO2 = new AllocateOrderDetailDO();\n        detailDO2.setId(12L);\n        detailDO2.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO2.setAllocateOrderNo(\"123\");\n        detailDO2.setOutStorageDetailId(22L);\n        detailDO2.setOutStorageId(2L);\n\n        AllocateOrderDetailDO detailDO3 = new AllocateOrderDetailDO();\n        detailDO3.setId(13L);\n        detailDO3.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO3.setAllocateOrderNo(\"123\");\n        detailDO3.setOutStorageDetailId(23L);\n        detailDO3.setOutStorageId(2L);\n\n        AllocateOrderDetailDO detailDO4 = new AllocateOrderDetailDO();\n        detailDO4.setId(14L);\n        detailDO4.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        detailDO4.setAllocateOrderNo(\"123\");\n        detailDO4.setOutStorageDetailId(24L);\n        detailDO4.setOutStorageId(2L);\n\n        detailDOList = new ArrayList<>();\n        detailDOList.add(detailDO1);\n        detailDOList.add(detailDO2);\n        detailDOList.add(detailDO3);\n        detailDOList.add(detailDO4);\n\n\n\n        ////以下是测试状态转换的预处理\n//        testRequest = new OrderStatusBuildRequest();\n//        testRequest.setOrderType(OrderType.MATERIAL_ALLOCATE);\n//        testRequest.setOrderStatus();\n//        testRequest.setOrderOperateType();\n//        testRequest.setNeedApproval();\n//        testRequest.setApproval();\n//        testRequest.setOrderId();\n//        testRequest.setStatus();\n//\n//        requestDetailList = new ArrayList<>();\n//\n//        OrderDetailStatusBuildRequest detailRequest1 = new OrderDetailStatusBuildRequest();\n//        detailRequest1.setOrderType();\n//        detailRequest1.setOrderStatus();\n//        detailRequest1.setOrderOperateType();\n//        detailRequest1.setNeedApproval();\n//        detailRequest1.setApproval();\n//        detailRequest1.setStatus();\n//        requestDetailList.add(detailRequest1);\n//\n//        OrderDetailStatusBuildRequest detailRequest2 = new OrderDetailStatusBuildRequest();\n//        requestDetailList.add(detailRequest2);\n\n         outStorageDO = new OutStorageDO();\n         outStorageDO.setId(2L);\n\n\n        outStorageDetailDOList = new ArrayList<>();\n        OutStorageDetailDO outStorageDetailDO1 = new OutStorageDetailDO();\n        outStorageDetailDO1.setId(21L);\n        outStorageDetailDO1.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO1);\n\n        OutStorageDetailDO outStorageDetailDO2 = new OutStorageDetailDO();\n        outStorageDetailDO2.setId(22L);\n        outStorageDetailDO2.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO2);\n\n        OutStorageDetailDO outStorageDetailDO3 = new OutStorageDetailDO();\n        outStorageDetailDO3.setId(23L);\n        outStorageDetailDO3.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO3);\n\n        OutStorageDetailDO outStorageDetailDO4 = new OutStorageDetailDO();\n        outStorageDetailDO4.setId(24L);\n        outStorageDetailDO4.setOutStorageId(2L);\n        outStorageDetailDOList.add(outStorageDetailDO4);\n\n\n\n    }\n\n    @Test\n    public void testBuildOrderStatusRequest() {\n       handleTestBuildOrderStatusRequest();\n    }\n\n\n    private OrderStatusBuildRequest handleTestBuildOrderStatusRequest() {\n\n        // 设置模拟的方法调用返回值\n        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);\n        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);\n\n        // 调用被测试的方法\n//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);\n        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 0);\n\n        // 断言返回值是否符合预期\n        Integer status = result.getStatus();\n        Assert.assertTrue(result!=null);\n\n        return result;\n    }\n\n\n    /**\n     * 测试调拨单出库状态转换，以下情景：\n     * （1）要审批        outStorageStatus = 2\n     *\n     * （2）不要审批：调拨详情都是待确认   outStorageStatus = 11\n     * （3）不要审批：调拨详情都是已完成   outStorageStatus = 1\n     * （4）不要审批：调拨详情都是已取消    outStorageStatus = 6\n     * （5）不要审批：调拨详情都是已驳回    outStorageStatus = 6\n     * （6）不要审批：调拨详情已完成，已取消，已驳回，待确认 outStorageStatus = 11\n     * （7）不要审批：调拨详情已完成，待确认  outStorageStatus = 11\n     * （8）不要审批：调拨详情已取消，待确认  outStorageStatus = 11\n     * （9）不要审批：调拨详情已取消，已完成  outStorageStatus = 1\n     * （10）不要审批：审批驳回  outStorageStatus = 9\n     * （11）不要审批：审批撤销\n     *\n     */\n    @Test\n    public void testHandleMaterialAllocateOrderOutStorageStatus() {\n\n\n        typeDetailDOListWithOutApproval(11);\n\n        OrderStatusBuildRequest request = handleTestBuildOrderStatusRequest();\n\n        statusService.getStatus(request);\n\n        when(outStorageMapper.findById(anyLong())).thenReturn(outStorageDO);\n        when(outStorageDetailMapper.findByOutStorageId(anyLong())).thenReturn(outStorageDetailDOList);\n        when(materialAllocateOrderDetailMapper.selectList(any())).thenReturn(detailDOList);\n\n\n        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);\n        when(outStorageDetailMapper.updateBatchById(anyList())).thenReturn(1);\n\n        orderStatusBuildRequest.handleMaterialAllocateOrderOutStorageStatus(request, 2L);\n\n\n        verify(statusService).getStatus(eq(request));\n//        verify(outStorageMapper).findById(eq(outStorageId));\n//        verify(outStorageDetailMapper).findByOutStorageId(eq(outStorageId));\n//        verify(orderStatus).findDetailByDetailIdList(anyList(), eq(outStorageDO.getMerchantId()));\n//        verify(outStorageMapper).updateById(eq(outStorageDO));\n//        verify(outStorageDetailMapper).updateBatchById(eq(outStorageDetailDOList));\n    }\n\n\n    /**\n     * 不审批场景类型\n     * @param type\n     * @return\n     */\n    private List<AllocateOrderDetailDO> typeDetailDOListWithOutApproval(Integer type) {\n\n        List<AllocateOrderDetailDO> handleDetailDOList = detailDOList;\n        //2 不要审批：调拨详情都是待确认\n        if (type == 2) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n            }\n        }\n\n        //3不要审批：调拨详情都是已完成   outStorageStatus = 11\n        else if (type == 3) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            }\n        }\n        //4 不要审批：调拨详情都是已取消\n        else if (type == 4) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            }\n        }\n\n        //（5）不要审批：调拨详情都是已驳回\n        else if (type == 5) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.REJECT.getValue());\n            }\n        }\n        //6不要审批：调拨详情已完成，已取消，已驳回，待确认\n        else if (type == 6) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.REJECT.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        }\n\n        // 7 不要审批：调拨详情已完成，待确认\n        else if (type == 7) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        }\n        // 8 不要审批：调拨详情已取消，待确认\n        else if (type == 8) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());\n        }\n\n        //9 不要审批：调拨详情已取消，已完成\n        else if (type == 9) {\n            handleDetailDOList.get(0).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(1).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());\n            handleDetailDOList.get(2).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n            handleDetailDOList.get(3).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());\n        }\n\n        //10不要审批：审批驳回\n        else if (type == 10) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REJECT.getValue());\n            }\n        }\n        // 11 不要审批：审批撤销\n        else if (type == 11) {\n            for (AllocateOrderDetailDO detailDO : handleDetailDOList) {\n                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REVOKE.getValue());\n            }\n        }\n        return handleDetailDOList;\n    }\n\n```","slug":"Mockito实战","published":1,"updated":"2023-04-19T10:10:34.572Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clgnsww0k0001i4vc7zdqcqt2","content":"<p>为什么要有个Mockito，本身Junit就可以做单元测试，为什么还要加一个Mcokito作为单元测试框架。</p>\n<p>实际上两者不矛盾，甚至两者是搭配着使用的，确切的说Mockito是一个单元测试模拟框架，来帮助发现隐藏bug，提高代码质量。为什么会有这样的作用呢，具体一点的实践场景都有哪些？</p>\n<p>首先Mockito注重的是一个模拟，本身mock本意就有模仿假装的意思在里面，假设我们的代码需要跟第三方联调，我们需要人家给我们数据，设置前置条件。实际工作中就知道，工作本身可能不太难，但是和人交流协同有时候更消耗时间。那我们可不可以模拟“别人”，给我们提供我们设想的数据，这样我们就不用看别人“眼色”。</p>\n<p>还有一种就是我们需要考虑各种测试场景，这里避免不了各种脏数据产生，导致测试环境什么样的数据都有，这些脏数据可能会影响后面的测试，我们可以模拟各种场景，不产生脏数据。</p>\n<h5 id=\"TDD测试驱动开发\"><a href=\"#TDD测试驱动开发\" class=\"headerlink\" title=\"TDD测试驱动开发\"></a>TDD测试驱动开发</h5><p>首先我们要理解一个概念先，首先并不是什么代码都可以很方便的单元测试。这也是为什么我们不太愿意写单元测试的原因之一，麻烦觉得没意义。</p>\n<p>但是我们如果要理解一个概念TDD测试驱动开发，去理解写代码，能提高我们对需求的理解和提高代码的可维护性。以下是TDD的官方表述：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TDD（Test-Driven Development，测试驱动开发）是一种软件开发方法，它强调在编写代码之前先编写测试用例，然后只编写足够的代码使测试用例通过。TDD的基本思想是：先写测试，再写代码，然后重构代码，以确保代码的正确性和可维护性。</span><br><span class=\"line\"></span><br><span class=\"line\">TDD的流程通常被称为红-绿-重构（Red-Green-Refactor）：</span><br><span class=\"line\"></span><br><span class=\"line\">红：编写测试用例，运行测试用例，测试用例失败（红色）。</span><br><span class=\"line\"></span><br><span class=\"line\">绿：编写足够的代码使测试用例通过，运行测试用例，测试用例通过（绿色）。</span><br><span class=\"line\"></span><br><span class=\"line\">重构：重构代码，以提高代码的质量和可维护性，然后重新运行测试用例，确保测试用例仍然通过。</span><br><span class=\"line\"></span><br><span class=\"line\">TDD的目标是通过测试来驱动开发，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。TDD还可以帮助开发人员更好地理解需求，促进团队协作，提高系统稳定性。</span><br></pre></td></tr></table></figure>\n\n<p>试想一下，我们重构代码，对应的测试案例在maven构建时自动处理（前提是比不要把测试的给屏蔽了），能不能通过，构建的时候就走了一遍。</p>\n<p>同样在编写的时候，我们考虑到测试，做到将需求明确和逻辑梳理，把各个场景考虑清楚，避免过度测试，因为有时候很多地方测试测的时候，会出现很多重复测试某个场景。</p>\n<h5 id=\"Mockito基础\"><a href=\"#Mockito基础\" class=\"headerlink\" title=\"Mockito基础\"></a>Mockito基础</h5><p>在理解TDD的概念，我们可以借助Mockito来帮助我们完善单元测试，可以帮助哦我们去模拟各种场景，各种参数。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在工程中使用 Mockito，需要按照以下步骤：</span><br><span class=\"line\"></span><br><span class=\"line\">添加 Mockito 依赖项：在项目的构建文件中添加 Mockito 的依赖项，例如使用 Maven 的项目，在 pom.xml 文件中添加以下依赖项：</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.mockito&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;3.12.4&lt;/version&gt;</span><br><span class=\"line\">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br><span class=\"line\">创建测试用例：创建一个测试类，并在类中添加测试方法。使用 @Test 注解标记测试方法。</span><br><span class=\"line\"></span><br><span class=\"line\">创建模拟对象：在测试方法中，使用 Mockito.mock() 方法创建一个模拟对象。例如：</span><br><span class=\"line\"></span><br><span class=\"line\">// 创建一个模拟对象</span><br><span class=\"line\">List&lt;String&gt; mockedList = Mockito.mock(List.class);</span><br><span class=\"line\">设置模拟对象的行为：使用 Mockito.when() 方法设置模拟对象的行为。例如：</span><br><span class=\"line\"></span><br><span class=\"line\">// 设置模拟对象的行为</span><br><span class=\"line\">Mockito.when(mockedList.get(0)).thenReturn(&quot;first&quot;);</span><br><span class=\"line\">运行测试：使用 JUnit 运行测试用例，例如使用 @RunWith 注解和 @Test 注解。例如：</span><br><span class=\"line\"></span><br><span class=\"line\">// 运行测试用例</span><br><span class=\"line\">@RunWith(MockitoJUnitRunner.class)</span><br><span class=\"line\">public class MyTest &#123;</span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testMethod() &#123;</span><br><span class=\"line\">        // 测试方法中使用模拟对象</span><br><span class=\"line\">        List&lt;String&gt; mockedList = Mockito.mock(List.class);</span><br><span class=\"line\">        Mockito.when(mockedList.get(0)).thenReturn(&quot;first&quot;);</span><br><span class=\"line\">        assertEquals(&quot;first&quot;, mockedList.get(0));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">以上是使用 Mockito 的基本步骤，可以根据具体的测试场景和要求，使用 Mockito 提供的其他 API 和功能，例如验证模拟对象的方法调用次数、设置模拟对象的默认行为等。</span><br></pre></td></tr></table></figure>\n\n<p>以上只是一个大致的步骤，实际上我们使用的时候，肯定要比这复杂得多，举个例子，我们的一个service类，里面有很多依赖需要注入的bean，有的是数据库DAO层，有的是别的component。这时候我们该怎么做，怎么改来实现我们的预想目标。</p>\n<h5 id=\"Mockito实战\"><a href=\"#Mockito实战\" class=\"headerlink\" title=\"Mockito实战\"></a>Mockito实战</h5><p>接上面，首先我们写的一些业务代码，由于设计不好，写的像一条“布”，一样一步一步去写，由于业务的不断修改，就变得又臭又长的“布”。首先我们需要把代码写好，做好设计，如果你对一个很复杂的做接口测试，你会发现涉及到的东西太多，Mock了一大堆，场景复杂自己都不知道该如何是好。</p>\n<h6 id=\"1-编写代码\"><a href=\"#1-编写代码\" class=\"headerlink\" title=\"(1)编写代码\"></a>(1)编写代码</h6><p>第一步就是编写好代码，除了新写，也包括改造重构</p>\n<p>对于TDD代码的要求</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TDD（测试驱动开发）对代码设计的要求主要包括以下几个方面：</span><br><span class=\"line\"></span><br><span class=\"line\">可测试性：代码必须易于测试，即能够轻松地编写测试用例并进行测试。为了实现可测试性，代码应该遵循良好的编码规范和设计原则，例如单一职责原则、开闭原则、依赖倒置原则等。</span><br><span class=\"line\"></span><br><span class=\"line\">可扩展性：代码必须易于扩展，即能够轻松地添加新的功能或修改现有的功能，而不会影响现有的功能或导致代码重构。为了实现可扩展性，代码应该遵循良好的设计模式和架构模式，例如工厂模式、策略模式、MVC模式等。</span><br><span class=\"line\"></span><br><span class=\"line\">可维护性：代码必须易于维护，即能够轻松地修改和更新代码，而不会影响现有的功能或导致代码重构。为了实现可维护性，代码应该遵循良好的编码规范和设计原则，例如代码重构、注释、命名规范等。</span><br><span class=\"line\"></span><br><span class=\"line\">可重用性：代码必须易于重用，即能够轻松地将代码移植到其他项目或模块中，从而提高代码的复用性和可维护性。为了实现可重用性，代码应该遵循良好的设计模式和架构模式，例如模板方法模式、适配器模式、代理模式等。</span><br><span class=\"line\"></span><br><span class=\"line\">总之，TDD要求代码具有良好的可测试性、可扩展性、可维护性和可重用性，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"（2）Mock注解的使用\"><a href=\"#（2）Mock注解的使用\" class=\"headerlink\" title=\"（2）Mock注解的使用\"></a>（2）Mock注解的使用</h6><p>在代码写好后，我们要去测试，我们要利用Mockito来模拟对应的对象。</p>\n<p>创建 Mock 对象的语法为 mock(class or interface)。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mock(Class classToMock);</span><br><span class=\"line\"> mock(Class classToMock, String name)</span><br><span class=\"line\"> mock(Class classToMock, Answer defaultAnswer)</span><br><span class=\"line\"> mock(Class classToMock, MockSettings mockSettings)</span><br><span class=\"line\"> mock(Class classToMock, ReturnValues returnValues)</span><br></pre></td></tr></table></figure>\n<p>或者</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Mock</span><br><span class=\"line\">   private MaterialAllocateOrderMapper materialAllocateOrderMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">   @Mock</span><br><span class=\"line\">   private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;</span><br></pre></td></tr></table></figure>\n\n<p>我们实际工作中会出现AService依赖BService，这种情况怎么处理呢？</p>\n<p>实际上我们这里要模拟的是BService，需要自动注入模拟对象，这里我们就用到@InjectMocks注解。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Mock</span><br><span class=\"line\">private MaterialAllocateOrderMapper materialAllocateOrderMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">@Mock</span><br><span class=\"line\">private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">@InjectMocks</span><br><span class=\"line\">private MaterialAllocateOrderSupport orderStatusBuildRequest;</span><br></pre></td></tr></table></figure>\n<p>设置对象调用的预期返回值</p>\n<p>原则上我们mock的对象，没有设置默认或者于其返回值，调用里面的方法，什么忙都不会做，但实际上我们需要他们“返回”一些我们需要的东西，这就是要设置预期返回值。</p>\n<p>通过 when(mock.someMethod()).thenReturn(value) 来设定 Mock 对象某个方法调用时的返回值。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testBuildOrderStatusRequest() &#123;</span><br><span class=\"line\">       handleTestBuildOrderStatusRequest();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    private OrderStatusBuildRequest handleTestBuildOrderStatusRequest() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        // 设置模拟的方法调用返回值</span><br><span class=\"line\">        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);</span><br><span class=\"line\">        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);</span><br><span class=\"line\"></span><br><span class=\"line\">        // 调用被测试的方法</span><br><span class=\"line\">//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);</span><br><span class=\"line\">        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 0);</span><br><span class=\"line\"></span><br><span class=\"line\">        // 断言返回值是否符合预期</span><br><span class=\"line\">        Integer status = result.getStatus();</span><br><span class=\"line\">        Assert.assertTrue(result!=null);</span><br><span class=\"line\"></span><br><span class=\"line\">        return result;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>但是有时候我们需要给定一些值，作为条件，比如我们模拟用户，首先要把用户信息先给进去，这里我们直接用@Before注解就可以</p>\n<p><code>@Before</code> 是 JUnit 框架提供的一个注解，用于标记在每个测试方法执行之前需要执行的方法。通常，在测试方法执行之前需要进行一些初始化操作，例如创建对象、初始化变量等。使用 <code>@Before</code> 注解可以将这些初始化操作封装到一个方法中，并在每个测试方法执行之前自动执行。</p>\n<p>使用 <code>@Before</code> 注解时，需要满足以下条件：</p>\n<ol>\n<li><p>被测试类中需要有一个方法，它使用 <code>@Before</code> 注解进行标记。</p>\n</li>\n<li><p><code>@Before</code> 注解标记的方法必须是公共方法（public），没有参数，并且没有返回值。</p>\n</li>\n<li><p><code>@Before</code> 注解标记的方法会在每个测试方法执行之前自动执行。</p>\n</li>\n</ol>\n<p>例如：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTest</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyObject myObject;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setUp</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        myObject = <span class=\"keyword\">new</span> <span class=\"title class_\">MyObject</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testMethod1</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试方法1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testMethod2</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试方法2</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的例子中，<code>MyTest</code> 类中有一个 <code>setUp()</code> 方法，它使用 <code>@Before</code> 注解进行标记。在 <code>setUp()</code> 方法中，创建了一个 <code>MyObject</code> 对象，并将其赋值给 <code>myObject</code> 属性。在测试方法中，可以使用 <code>myObject</code> 属性进行测试。</p>\n<p>使用 <code>@Before</code> 注解可以将测试方法中的重复代码提取到一个公共的方法中，避免代码重复，提高测试代码的可读性和可维护性。</p>\n<p>下面我发一下具体的代码demo</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOrderMapper materialAllocateOrderMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@InjectMocks</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOrderSupport orderStatusBuildRequest;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOutStorageStatusService statusService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OutStorageMapper outStorageMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OutStorageDetailMapper outStorageDetailMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AllocateOrderDO allocateOrderDO;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;AllocateOrderDetailDO&gt; detailDOList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderStatusBuildRequest testRequest;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;OrderDetailStatusBuildRequest&gt; requestDetailList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OutStorageDO outStorageDO;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;OutStorageDetailDO&gt; outStorageDetailDOList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setUp</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        MockitoAnnotations.initMocks(<span class=\"built_in\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        allocateOrderDO = <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDO</span>();</span><br><span class=\"line\">        allocateOrderDO.setId(<span class=\"number\">1L</span>);</span><br><span class=\"line\">        allocateOrderDO.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        allocateOrderDO.setMerchantId(<span class=\"number\">1L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO1.setId(<span class=\"number\">11L</span>);</span><br><span class=\"line\">        detailDO1.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO1.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO1.setOutStorageDetailId(<span class=\"number\">21L</span>);</span><br><span class=\"line\">        detailDO1.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO2.setId(<span class=\"number\">12L</span>);</span><br><span class=\"line\">        detailDO2.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO2.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO2.setOutStorageDetailId(<span class=\"number\">22L</span>);</span><br><span class=\"line\">        detailDO2.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO3.setId(<span class=\"number\">13L</span>);</span><br><span class=\"line\">        detailDO3.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO3.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO3.setOutStorageDetailId(<span class=\"number\">23L</span>);</span><br><span class=\"line\">        detailDO3.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO4</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO4.setId(<span class=\"number\">14L</span>);</span><br><span class=\"line\">        detailDO4.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO4.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO4.setOutStorageDetailId(<span class=\"number\">24L</span>);</span><br><span class=\"line\">        detailDO4.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        detailDOList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        detailDOList.add(detailDO1);</span><br><span class=\"line\">        detailDOList.add(detailDO2);</span><br><span class=\"line\">        detailDOList.add(detailDO3);</span><br><span class=\"line\">        detailDOList.add(detailDO4);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">////以下是测试状态转换的预处理</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest = new OrderStatusBuildRequest();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderType(OrderType.MATERIAL_ALLOCATE);</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderOperateType();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setNeedApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderId();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        requestDetailList = new ArrayList&lt;&gt;();</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        OrderDetailStatusBuildRequest detailRequest1 = new OrderDetailStatusBuildRequest();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setOrderType();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setOrderStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setOrderOperateType();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setNeedApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//        requestDetailList.add(detailRequest1);</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        OrderDetailStatusBuildRequest detailRequest2 = new OrderDetailStatusBuildRequest();</span></span><br><span class=\"line\"><span class=\"comment\">//        requestDetailList.add(detailRequest2);</span></span><br><span class=\"line\"></span><br><span class=\"line\">         outStorageDO = <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDO</span>();</span><br><span class=\"line\">         outStorageDO.setId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        outStorageDetailDOList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO1.setId(<span class=\"number\">21L</span>);</span><br><span class=\"line\">        outStorageDetailDO1.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO1);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO2.setId(<span class=\"number\">22L</span>);</span><br><span class=\"line\">        outStorageDetailDO2.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO3.setId(<span class=\"number\">23L</span>);</span><br><span class=\"line\">        outStorageDetailDO3.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO3);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO4</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO4.setId(<span class=\"number\">24L</span>);</span><br><span class=\"line\">        outStorageDetailDO4.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO4);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testBuildOrderStatusRequest</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">       handleTestBuildOrderStatusRequest();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderStatusBuildRequest <span class=\"title function_\">handleTestBuildOrderStatusRequest</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置模拟的方法调用返回值</span></span><br><span class=\"line\">        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);</span><br><span class=\"line\">        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 调用被测试的方法</span></span><br><span class=\"line\"><span class=\"comment\">//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);</span></span><br><span class=\"line\">        <span class=\"type\">OrderStatusBuildRequest</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> orderStatusBuildRequest.buildOrderStatusRequest(<span class=\"number\">1L</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 断言返回值是否符合预期</span></span><br><span class=\"line\">        <span class=\"type\">Integer</span> <span class=\"variable\">status</span> <span class=\"operator\">=</span> result.getStatus();</span><br><span class=\"line\">        Assert.assertTrue(result!=<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 测试调拨单出库状态转换，以下情景：</span></span><br><span class=\"line\"><span class=\"comment\">     * （1）要审批        outStorageStatus = 2</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * （2）不要审批：调拨详情都是待确认   outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （3）不要审批：调拨详情都是已完成   outStorageStatus = 1</span></span><br><span class=\"line\"><span class=\"comment\">     * （4）不要审批：调拨详情都是已取消    outStorageStatus = 6</span></span><br><span class=\"line\"><span class=\"comment\">     * （5）不要审批：调拨详情都是已驳回    outStorageStatus = 6</span></span><br><span class=\"line\"><span class=\"comment\">     * （6）不要审批：调拨详情已完成，已取消，已驳回，待确认 outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （7）不要审批：调拨详情已完成，待确认  outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （8）不要审批：调拨详情已取消，待确认  outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （9）不要审批：调拨详情已取消，已完成  outStorageStatus = 1</span></span><br><span class=\"line\"><span class=\"comment\">     * （10）不要审批：审批驳回  outStorageStatus = 9</span></span><br><span class=\"line\"><span class=\"comment\">     * （11）不要审批：审批撤销</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testHandleMaterialAllocateOrderOutStorageStatus</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        typeDetailDOListWithOutApproval(<span class=\"number\">11</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OrderStatusBuildRequest</span> <span class=\"variable\">request</span> <span class=\"operator\">=</span> handleTestBuildOrderStatusRequest();</span><br><span class=\"line\"></span><br><span class=\"line\">        statusService.getStatus(request);</span><br><span class=\"line\"></span><br><span class=\"line\">        when(outStorageMapper.findById(anyLong())).thenReturn(outStorageDO);</span><br><span class=\"line\">        when(outStorageDetailMapper.findByOutStorageId(anyLong())).thenReturn(outStorageDetailDOList);</span><br><span class=\"line\">        when(materialAllocateOrderDetailMapper.selectList(any())).thenReturn(detailDOList);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);</span><br><span class=\"line\">        when(outStorageDetailMapper.updateBatchById(anyList())).thenReturn(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        orderStatusBuildRequest.handleMaterialAllocateOrderOutStorageStatus(request, <span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        verify(statusService).getStatus(eq(request));</span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageMapper).findById(eq(outStorageId));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageDetailMapper).findByOutStorageId(eq(outStorageId));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(orderStatus).findDetailByDetailIdList(anyList(), eq(outStorageDO.getMerchantId()));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageMapper).updateById(eq(outStorageDO));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageDetailMapper).updateBatchById(eq(outStorageDetailDOList));</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 不审批场景类型</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;AllocateOrderDetailDO&gt; <span class=\"title function_\">typeDetailDOListWithOutApproval</span><span class=\"params\">(Integer type)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        List&lt;AllocateOrderDetailDO&gt; handleDetailDOList = detailDOList;</span><br><span class=\"line\">        <span class=\"comment\">//2 不要审批：调拨详情都是待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3不要审批：调拨详情都是已完成   outStorageStatus = 11</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//4 不要审批：调拨详情都是已取消</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//（5）不要审批：调拨详情都是已驳回</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.REJECT.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//6不要审批：调拨详情已完成，已取消，已驳回，待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">6</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.REJECT.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 7 不要审批：调拨详情已完成，待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">7</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 8 不要审批：调拨详情已取消，待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//9 不要审批：调拨详情已取消，已完成</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">9</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//10不要审批：审批驳回</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REJECT.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 11 不要审批：审批撤销</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">11</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REVOKE.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> handleDetailDOList;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<p>为什么要有个Mockito，本身Junit就可以做单元测试，为什么还要加一个Mcokito作为单元测试框架。</p>\n<p>实际上两者不矛盾，甚至两者是搭配着使用的，确切的说Mockito是一个单元测试模拟框架，来帮助发现隐藏bug，提高代码质量。为什么会有这样的作用呢，具体一点的实践场景都有哪些？</p>\n<p>首先Mockito注重的是一个模拟，本身mock本意就有模仿假装的意思在里面，假设我们的代码需要跟第三方联调，我们需要人家给我们数据，设置前置条件。实际工作中就知道，工作本身可能不太难，但是和人交流协同有时候更消耗时间。那我们可不可以模拟“别人”，给我们提供我们设想的数据，这样我们就不用看别人“眼色”。</p>\n<p>还有一种就是我们需要考虑各种测试场景，这里避免不了各种脏数据产生，导致测试环境什么样的数据都有，这些脏数据可能会影响后面的测试，我们可以模拟各种场景，不产生脏数据。</p>\n<h5 id=\"TDD测试驱动开发\"><a href=\"#TDD测试驱动开发\" class=\"headerlink\" title=\"TDD测试驱动开发\"></a>TDD测试驱动开发</h5><p>首先我们要理解一个概念先，首先并不是什么代码都可以很方便的单元测试。这也是为什么我们不太愿意写单元测试的原因之一，麻烦觉得没意义。</p>\n<p>但是我们如果要理解一个概念TDD测试驱动开发，去理解写代码，能提高我们对需求的理解和提高代码的可维护性。以下是TDD的官方表述：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TDD（Test-Driven Development，测试驱动开发）是一种软件开发方法，它强调在编写代码之前先编写测试用例，然后只编写足够的代码使测试用例通过。TDD的基本思想是：先写测试，再写代码，然后重构代码，以确保代码的正确性和可维护性。</span><br><span class=\"line\"></span><br><span class=\"line\">TDD的流程通常被称为红-绿-重构（Red-Green-Refactor）：</span><br><span class=\"line\"></span><br><span class=\"line\">红：编写测试用例，运行测试用例，测试用例失败（红色）。</span><br><span class=\"line\"></span><br><span class=\"line\">绿：编写足够的代码使测试用例通过，运行测试用例，测试用例通过（绿色）。</span><br><span class=\"line\"></span><br><span class=\"line\">重构：重构代码，以提高代码的质量和可维护性，然后重新运行测试用例，确保测试用例仍然通过。</span><br><span class=\"line\"></span><br><span class=\"line\">TDD的目标是通过测试来驱动开发，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。TDD还可以帮助开发人员更好地理解需求，促进团队协作，提高系统稳定性。</span><br></pre></td></tr></table></figure>\n\n<p>试想一下，我们重构代码，对应的测试案例在maven构建时自动处理（前提是比不要把测试的给屏蔽了），能不能通过，构建的时候就走了一遍。</p>\n<p>同样在编写的时候，我们考虑到测试，做到将需求明确和逻辑梳理，把各个场景考虑清楚，避免过度测试，因为有时候很多地方测试测的时候，会出现很多重复测试某个场景。</p>\n<h5 id=\"Mockito基础\"><a href=\"#Mockito基础\" class=\"headerlink\" title=\"Mockito基础\"></a>Mockito基础</h5><p>在理解TDD的概念，我们可以借助Mockito来帮助我们完善单元测试，可以帮助哦我们去模拟各种场景，各种参数。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在工程中使用 Mockito，需要按照以下步骤：</span><br><span class=\"line\"></span><br><span class=\"line\">添加 Mockito 依赖项：在项目的构建文件中添加 Mockito 的依赖项，例如使用 Maven 的项目，在 pom.xml 文件中添加以下依赖项：</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;dependency&gt;</span><br><span class=\"line\">    &lt;groupId&gt;org.mockito&lt;/groupId&gt;</span><br><span class=\"line\">    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;</span><br><span class=\"line\">    &lt;version&gt;3.12.4&lt;/version&gt;</span><br><span class=\"line\">    &lt;scope&gt;test&lt;/scope&gt;</span><br><span class=\"line\">&lt;/dependency&gt;</span><br><span class=\"line\">创建测试用例：创建一个测试类，并在类中添加测试方法。使用 @Test 注解标记测试方法。</span><br><span class=\"line\"></span><br><span class=\"line\">创建模拟对象：在测试方法中，使用 Mockito.mock() 方法创建一个模拟对象。例如：</span><br><span class=\"line\"></span><br><span class=\"line\">// 创建一个模拟对象</span><br><span class=\"line\">List&lt;String&gt; mockedList = Mockito.mock(List.class);</span><br><span class=\"line\">设置模拟对象的行为：使用 Mockito.when() 方法设置模拟对象的行为。例如：</span><br><span class=\"line\"></span><br><span class=\"line\">// 设置模拟对象的行为</span><br><span class=\"line\">Mockito.when(mockedList.get(0)).thenReturn(&quot;first&quot;);</span><br><span class=\"line\">运行测试：使用 JUnit 运行测试用例，例如使用 @RunWith 注解和 @Test 注解。例如：</span><br><span class=\"line\"></span><br><span class=\"line\">// 运行测试用例</span><br><span class=\"line\">@RunWith(MockitoJUnitRunner.class)</span><br><span class=\"line\">public class MyTest &#123;</span><br><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testMethod() &#123;</span><br><span class=\"line\">        // 测试方法中使用模拟对象</span><br><span class=\"line\">        List&lt;String&gt; mockedList = Mockito.mock(List.class);</span><br><span class=\"line\">        Mockito.when(mockedList.get(0)).thenReturn(&quot;first&quot;);</span><br><span class=\"line\">        assertEquals(&quot;first&quot;, mockedList.get(0));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">以上是使用 Mockito 的基本步骤，可以根据具体的测试场景和要求，使用 Mockito 提供的其他 API 和功能，例如验证模拟对象的方法调用次数、设置模拟对象的默认行为等。</span><br></pre></td></tr></table></figure>\n\n<p>以上只是一个大致的步骤，实际上我们使用的时候，肯定要比这复杂得多，举个例子，我们的一个service类，里面有很多依赖需要注入的bean，有的是数据库DAO层，有的是别的component。这时候我们该怎么做，怎么改来实现我们的预想目标。</p>\n<h5 id=\"Mockito实战\"><a href=\"#Mockito实战\" class=\"headerlink\" title=\"Mockito实战\"></a>Mockito实战</h5><p>接上面，首先我们写的一些业务代码，由于设计不好，写的像一条“布”，一样一步一步去写，由于业务的不断修改，就变得又臭又长的“布”。首先我们需要把代码写好，做好设计，如果你对一个很复杂的做接口测试，你会发现涉及到的东西太多，Mock了一大堆，场景复杂自己都不知道该如何是好。</p>\n<h6 id=\"1-编写代码\"><a href=\"#1-编写代码\" class=\"headerlink\" title=\"(1)编写代码\"></a>(1)编写代码</h6><p>第一步就是编写好代码，除了新写，也包括改造重构</p>\n<p>对于TDD代码的要求</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TDD（测试驱动开发）对代码设计的要求主要包括以下几个方面：</span><br><span class=\"line\"></span><br><span class=\"line\">可测试性：代码必须易于测试，即能够轻松地编写测试用例并进行测试。为了实现可测试性，代码应该遵循良好的编码规范和设计原则，例如单一职责原则、开闭原则、依赖倒置原则等。</span><br><span class=\"line\"></span><br><span class=\"line\">可扩展性：代码必须易于扩展，即能够轻松地添加新的功能或修改现有的功能，而不会影响现有的功能或导致代码重构。为了实现可扩展性，代码应该遵循良好的设计模式和架构模式，例如工厂模式、策略模式、MVC模式等。</span><br><span class=\"line\"></span><br><span class=\"line\">可维护性：代码必须易于维护，即能够轻松地修改和更新代码，而不会影响现有的功能或导致代码重构。为了实现可维护性，代码应该遵循良好的编码规范和设计原则，例如代码重构、注释、命名规范等。</span><br><span class=\"line\"></span><br><span class=\"line\">可重用性：代码必须易于重用，即能够轻松地将代码移植到其他项目或模块中，从而提高代码的复用性和可维护性。为了实现可重用性，代码应该遵循良好的设计模式和架构模式，例如模板方法模式、适配器模式、代理模式等。</span><br><span class=\"line\"></span><br><span class=\"line\">总之，TDD要求代码具有良好的可测试性、可扩展性、可维护性和可重用性，以确保代码的正确性和可维护性，同时提高开发效率和项目质量。</span><br></pre></td></tr></table></figure>\n\n<h6 id=\"（2）Mock注解的使用\"><a href=\"#（2）Mock注解的使用\" class=\"headerlink\" title=\"（2）Mock注解的使用\"></a>（2）Mock注解的使用</h6><p>在代码写好后，我们要去测试，我们要利用Mockito来模拟对应的对象。</p>\n<p>创建 Mock 对象的语法为 mock(class or interface)。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mock(Class classToMock);</span><br><span class=\"line\"> mock(Class classToMock, String name)</span><br><span class=\"line\"> mock(Class classToMock, Answer defaultAnswer)</span><br><span class=\"line\"> mock(Class classToMock, MockSettings mockSettings)</span><br><span class=\"line\"> mock(Class classToMock, ReturnValues returnValues)</span><br></pre></td></tr></table></figure>\n<p>或者</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Mock</span><br><span class=\"line\">   private MaterialAllocateOrderMapper materialAllocateOrderMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">   @Mock</span><br><span class=\"line\">   private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;</span><br></pre></td></tr></table></figure>\n\n<p>我们实际工作中会出现AService依赖BService，这种情况怎么处理呢？</p>\n<p>实际上我们这里要模拟的是BService，需要自动注入模拟对象，这里我们就用到@InjectMocks注解。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@Mock</span><br><span class=\"line\">private MaterialAllocateOrderMapper materialAllocateOrderMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">@Mock</span><br><span class=\"line\">private MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">@InjectMocks</span><br><span class=\"line\">private MaterialAllocateOrderSupport orderStatusBuildRequest;</span><br></pre></td></tr></table></figure>\n<p>设置对象调用的预期返回值</p>\n<p>原则上我们mock的对象，没有设置默认或者于其返回值，调用里面的方法，什么忙都不会做，但实际上我们需要他们“返回”一些我们需要的东西，这就是要设置预期返回值。</p>\n<p>通过 when(mock.someMethod()).thenReturn(value) 来设定 Mock 对象某个方法调用时的返回值。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">    @Test</span><br><span class=\"line\">    public void testBuildOrderStatusRequest() &#123;</span><br><span class=\"line\">       handleTestBuildOrderStatusRequest();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    private OrderStatusBuildRequest handleTestBuildOrderStatusRequest() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        // 设置模拟的方法调用返回值</span><br><span class=\"line\">        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);</span><br><span class=\"line\">        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);</span><br><span class=\"line\"></span><br><span class=\"line\">        // 调用被测试的方法</span><br><span class=\"line\">//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);</span><br><span class=\"line\">        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 0);</span><br><span class=\"line\"></span><br><span class=\"line\">        // 断言返回值是否符合预期</span><br><span class=\"line\">        Integer status = result.getStatus();</span><br><span class=\"line\">        Assert.assertTrue(result!=null);</span><br><span class=\"line\"></span><br><span class=\"line\">        return result;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n\n<p>但是有时候我们需要给定一些值，作为条件，比如我们模拟用户，首先要把用户信息先给进去，这里我们直接用@Before注解就可以</p>\n<p><code>@Before</code> 是 JUnit 框架提供的一个注解，用于标记在每个测试方法执行之前需要执行的方法。通常，在测试方法执行之前需要进行一些初始化操作，例如创建对象、初始化变量等。使用 <code>@Before</code> 注解可以将这些初始化操作封装到一个方法中，并在每个测试方法执行之前自动执行。</p>\n<p>使用 <code>@Before</code> 注解时，需要满足以下条件：</p>\n<ol>\n<li><p>被测试类中需要有一个方法，它使用 <code>@Before</code> 注解进行标记。</p>\n</li>\n<li><p><code>@Before</code> 注解标记的方法必须是公共方法（public），没有参数，并且没有返回值。</p>\n</li>\n<li><p><code>@Before</code> 注解标记的方法会在每个测试方法执行之前自动执行。</p>\n</li>\n</ol>\n<p>例如：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">class</span> <span class=\"title class_\">MyTest</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> MyObject myObject;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setUp</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        myObject = <span class=\"keyword\">new</span> <span class=\"title class_\">MyObject</span>();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testMethod1</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试方法1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testMethod2</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 测试方法2</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>在上面的例子中，<code>MyTest</code> 类中有一个 <code>setUp()</code> 方法，它使用 <code>@Before</code> 注解进行标记。在 <code>setUp()</code> 方法中，创建了一个 <code>MyObject</code> 对象，并将其赋值给 <code>myObject</code> 属性。在测试方法中，可以使用 <code>myObject</code> 属性进行测试。</p>\n<p>使用 <code>@Before</code> 注解可以将测试方法中的重复代码提取到一个公共的方法中，避免代码重复，提高测试代码的可读性和可维护性。</p>\n<p>下面我发一下具体的代码demo</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOrderMapper materialAllocateOrderMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOrderDetailMapper materialAllocateOrderDetailMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@InjectMocks</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOrderSupport orderStatusBuildRequest;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> MaterialAllocateOutStorageStatusService statusService;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OutStorageMapper outStorageMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Mock</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OutStorageDetailMapper outStorageDetailMapper;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> AllocateOrderDO allocateOrderDO;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;AllocateOrderDetailDO&gt; detailDOList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderStatusBuildRequest testRequest;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;OrderDetailStatusBuildRequest&gt; requestDetailList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OutStorageDO outStorageDO;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;OutStorageDetailDO&gt; outStorageDetailDOList;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Before</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">setUp</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">        MockitoAnnotations.initMocks(<span class=\"built_in\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        allocateOrderDO = <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDO</span>();</span><br><span class=\"line\">        allocateOrderDO.setId(<span class=\"number\">1L</span>);</span><br><span class=\"line\">        allocateOrderDO.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        allocateOrderDO.setMerchantId(<span class=\"number\">1L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO1.setId(<span class=\"number\">11L</span>);</span><br><span class=\"line\">        detailDO1.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO1.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO1.setOutStorageDetailId(<span class=\"number\">21L</span>);</span><br><span class=\"line\">        detailDO1.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO2.setId(<span class=\"number\">12L</span>);</span><br><span class=\"line\">        detailDO2.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO2.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO2.setOutStorageDetailId(<span class=\"number\">22L</span>);</span><br><span class=\"line\">        detailDO2.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO3.setId(<span class=\"number\">13L</span>);</span><br><span class=\"line\">        detailDO3.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO3.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO3.setOutStorageDetailId(<span class=\"number\">23L</span>);</span><br><span class=\"line\">        detailDO3.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">AllocateOrderDetailDO</span> <span class=\"variable\">detailDO4</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">AllocateOrderDetailDO</span>();</span><br><span class=\"line\">        detailDO4.setId(<span class=\"number\">14L</span>);</span><br><span class=\"line\">        detailDO4.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        detailDO4.setAllocateOrderNo(<span class=\"string\">&quot;123&quot;</span>);</span><br><span class=\"line\">        detailDO4.setOutStorageDetailId(<span class=\"number\">24L</span>);</span><br><span class=\"line\">        detailDO4.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        detailDOList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        detailDOList.add(detailDO1);</span><br><span class=\"line\">        detailDOList.add(detailDO2);</span><br><span class=\"line\">        detailDOList.add(detailDO3);</span><br><span class=\"line\">        detailDOList.add(detailDO4);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">////以下是测试状态转换的预处理</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest = new OrderStatusBuildRequest();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderType(OrderType.MATERIAL_ALLOCATE);</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderOperateType();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setNeedApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setOrderId();</span></span><br><span class=\"line\"><span class=\"comment\">//        testRequest.setStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        requestDetailList = new ArrayList&lt;&gt;();</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        OrderDetailStatusBuildRequest detailRequest1 = new OrderDetailStatusBuildRequest();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setOrderType();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setOrderStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setOrderOperateType();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setNeedApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setApproval();</span></span><br><span class=\"line\"><span class=\"comment\">//        detailRequest1.setStatus();</span></span><br><span class=\"line\"><span class=\"comment\">//        requestDetailList.add(detailRequest1);</span></span><br><span class=\"line\"><span class=\"comment\">//</span></span><br><span class=\"line\"><span class=\"comment\">//        OrderDetailStatusBuildRequest detailRequest2 = new OrderDetailStatusBuildRequest();</span></span><br><span class=\"line\"><span class=\"comment\">//        requestDetailList.add(detailRequest2);</span></span><br><span class=\"line\"></span><br><span class=\"line\">         outStorageDO = <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDO</span>();</span><br><span class=\"line\">         outStorageDO.setId(<span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        outStorageDetailDOList = <span class=\"keyword\">new</span> <span class=\"title class_\">ArrayList</span>&lt;&gt;();</span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO1</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO1.setId(<span class=\"number\">21L</span>);</span><br><span class=\"line\">        outStorageDetailDO1.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO1);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO2</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO2.setId(<span class=\"number\">22L</span>);</span><br><span class=\"line\">        outStorageDetailDO2.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO2);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO3</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO3.setId(<span class=\"number\">23L</span>);</span><br><span class=\"line\">        outStorageDetailDO3.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO3);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OutStorageDetailDO</span> <span class=\"variable\">outStorageDetailDO4</span> <span class=\"operator\">=</span> <span class=\"keyword\">new</span> <span class=\"title class_\">OutStorageDetailDO</span>();</span><br><span class=\"line\">        outStorageDetailDO4.setId(<span class=\"number\">24L</span>);</span><br><span class=\"line\">        outStorageDetailDO4.setOutStorageId(<span class=\"number\">2L</span>);</span><br><span class=\"line\">        outStorageDetailDOList.add(outStorageDetailDO4);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testBuildOrderStatusRequest</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\">       handleTestBuildOrderStatusRequest();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> OrderStatusBuildRequest <span class=\"title function_\">handleTestBuildOrderStatusRequest</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 设置模拟的方法调用返回值</span></span><br><span class=\"line\">        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);</span><br><span class=\"line\">        when(materialAllocateOrderDetailMapper.findByAllocateOrderNo(anyString(), anyLong())).thenReturn(detailDOList);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 调用被测试的方法</span></span><br><span class=\"line\"><span class=\"comment\">//        OrderStatusBuildRequest result = orderStatusBuildRequest.buildOrderStatusRequest(1L, 1);</span></span><br><span class=\"line\">        <span class=\"type\">OrderStatusBuildRequest</span> <span class=\"variable\">result</span> <span class=\"operator\">=</span> orderStatusBuildRequest.buildOrderStatusRequest(<span class=\"number\">1L</span>, <span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 断言返回值是否符合预期</span></span><br><span class=\"line\">        <span class=\"type\">Integer</span> <span class=\"variable\">status</span> <span class=\"operator\">=</span> result.getStatus();</span><br><span class=\"line\">        Assert.assertTrue(result!=<span class=\"literal\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 测试调拨单出库状态转换，以下情景：</span></span><br><span class=\"line\"><span class=\"comment\">     * （1）要审批        outStorageStatus = 2</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * （2）不要审批：调拨详情都是待确认   outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （3）不要审批：调拨详情都是已完成   outStorageStatus = 1</span></span><br><span class=\"line\"><span class=\"comment\">     * （4）不要审批：调拨详情都是已取消    outStorageStatus = 6</span></span><br><span class=\"line\"><span class=\"comment\">     * （5）不要审批：调拨详情都是已驳回    outStorageStatus = 6</span></span><br><span class=\"line\"><span class=\"comment\">     * （6）不要审批：调拨详情已完成，已取消，已驳回，待确认 outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （7）不要审批：调拨详情已完成，待确认  outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （8）不要审批：调拨详情已取消，待确认  outStorageStatus = 11</span></span><br><span class=\"line\"><span class=\"comment\">     * （9）不要审批：调拨详情已取消，已完成  outStorageStatus = 1</span></span><br><span class=\"line\"><span class=\"comment\">     * （10）不要审批：审批驳回  outStorageStatus = 9</span></span><br><span class=\"line\"><span class=\"comment\">     * （11）不要审批：审批撤销</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"meta\">@Test</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title function_\">testHandleMaterialAllocateOrderOutStorageStatus</span><span class=\"params\">()</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        typeDetailDOListWithOutApproval(<span class=\"number\">11</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"type\">OrderStatusBuildRequest</span> <span class=\"variable\">request</span> <span class=\"operator\">=</span> handleTestBuildOrderStatusRequest();</span><br><span class=\"line\"></span><br><span class=\"line\">        statusService.getStatus(request);</span><br><span class=\"line\"></span><br><span class=\"line\">        when(outStorageMapper.findById(anyLong())).thenReturn(outStorageDO);</span><br><span class=\"line\">        when(outStorageDetailMapper.findByOutStorageId(anyLong())).thenReturn(outStorageDetailDOList);</span><br><span class=\"line\">        when(materialAllocateOrderDetailMapper.selectList(any())).thenReturn(detailDOList);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        when(materialAllocateOrderMapper.findById(anyLong())).thenReturn(allocateOrderDO);</span><br><span class=\"line\">        when(outStorageDetailMapper.updateBatchById(anyList())).thenReturn(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        orderStatusBuildRequest.handleMaterialAllocateOrderOutStorageStatus(request, <span class=\"number\">2L</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        verify(statusService).getStatus(eq(request));</span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageMapper).findById(eq(outStorageId));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageDetailMapper).findByOutStorageId(eq(outStorageId));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(orderStatus).findDetailByDetailIdList(anyList(), eq(outStorageDO.getMerchantId()));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageMapper).updateById(eq(outStorageDO));</span></span><br><span class=\"line\"><span class=\"comment\">//        verify(outStorageDetailMapper).updateBatchById(eq(outStorageDetailDOList));</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 不审批场景类型</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> type</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@return</span></span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> List&lt;AllocateOrderDetailDO&gt; <span class=\"title function_\">typeDetailDOListWithOutApproval</span><span class=\"params\">(Integer type)</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        List&lt;AllocateOrderDetailDO&gt; handleDetailDOList = detailDOList;</span><br><span class=\"line\">        <span class=\"comment\">//2 不要审批：调拨详情都是待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (type == <span class=\"number\">2</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//3不要审批：调拨详情都是已完成   outStorageStatus = 11</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">3</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//4 不要审批：调拨详情都是已取消</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">4</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//（5）不要审批：调拨详情都是已驳回</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">5</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.REJECT.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//6不要审批：调拨详情已完成，已取消，已驳回，待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">6</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.REJECT.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// 7 不要审批：调拨详情已完成，待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">7</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 8 不要审批：调拨详情已取消，待确认</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">8</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.TO_CONFIRM.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//9 不要审批：调拨详情已取消，已完成</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">9</span>) &#123;</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">0</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">1</span>).setAllocateStatus(AllocateOrderStatus.CANCEL.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">2</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">            handleDetailDOList.get(<span class=\"number\">3</span>).setAllocateStatus(AllocateOrderStatus.FINISHED.getValue());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//10不要审批：审批驳回</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">10</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REJECT.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// 11 不要审批：审批撤销</span></span><br><span class=\"line\">        <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (type == <span class=\"number\">11</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (AllocateOrderDetailDO detailDO : handleDetailDOList) &#123;</span><br><span class=\"line\">                detailDO.setAllocateStatus(AllocateOrderStatus.APPROVAL_REVOKE.getValue());</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> handleDetailDOList;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>"},{"title":"hexo的优化和美化","author":"ZP","date":"2023-04-19T09:13:17.000Z","_content":"因为之前的文章只是介绍hexo的相关改造，实际跟工程一样，开发只占20%到30%，剩下的大头成本主要是维护和优化。所以说hexo的优化和美化也是一个可以研究的，比如说扩展功能，调整主题，安装插件等，来丰富博客的功能。\n\n### 主题设置\n我这边选的是NEXT主题，我们知道有一个配置文件_config.yml。主题对应也有这个设置，用来设置布局样式，展示按钮等。以下是主题的配置文件位置，后面我们很多的主题设置都要修改这个文件\n\n![主题配置文件位置](/images/hexo_next.png)\n\n\n#### NEXT主页样式\n\nnext有四种风格,在站点配置文件搜索字段Scheme Settings可以看到，\n```\nscheme: Muse\n#scheme: Mist\n#scheme: Pisces\n#scheme: Gemini\n```\n\n一般默认选择的是Muse，这里用的是四种：Gemini\n\n#### menu开启与设置\n设置完之后，发现整个博客是光秃秃的，看到别人的博客都有很多menu按钮。这些menu在哪里有呢，实际上在Next主题的配置文件具有对应的按钮在里面\n\n```\n# ---------------------------------------------------------------\n# Menu Settings\n# ---------------------------------------------------------------\n\n# Usage: `Key: /link/ || icon`\n# Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.\n# Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.\n# When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -> archives).\n# External url should start with http:// or https://\nmenu:\n  home: / || fa fa-home\n  about: /about/ || fa fa-user\n  tags: /tags/ || fa fa-tags\n  categories: /categories/ || fa fa-th\n  archives: /archives/ || fa fa-archive\n  schedule: /schedule/ || fa fa-calendar\n  sitemap: /sitemap.xml || fa fa-sitemap\n  commonweal: /404/ || fa fa-heartbeat\n```\n里面有些没有展示出来，是被注释了，我们解开注释就可以了。\n\n但是menu有了，但是点击报错跳到空白页面，这就需要我们自己设置，已分类和标签例子。\n\n刚开始我们点击这两个按钮会报错“Cannot GET XXX”错误，问题的原因是我们没有初始化，初始化具体的步骤：<br>\n\n1  创建对应的文件夹，可以通过命令在git bash 中输入以下代码创建相应的page：hexo new page \"tags\"hexo new page \"categories\"来创建文件夹。也可以手动创建文件夹，然后在里面创建index.md文件。\n\n\n\n2  在第一步完成后会在source文件夹中出现tags和categories的文件夹，在各自的文件夹里打开index.md文件进行修改(多加上一个type属性),标签的tags的index.md里面添加type: \"tags\"\n```js\n---\ntitle: tags\ndate: 2023-04-19 17:04:58\ntype: \"tags\"\n---\n\n```\n\n\n\n### 文章设置\n文件有很多属性，比如说tag标签，设置置顶文件等，一般来说这些属性都在对应的markdown文件的Front-matter部分。\n\n#### 文章置顶\n打开对应的文章文件，对应的目录是在source目录下面的_posts目录，里面保存的是我们的博客文章，文章也有对应的属性，在Front-matter里面设置的。我们通过设置sticky属性，设置为true即可置顶对应的这个文章。\n\n```\ntitle: Mockito实战\nauthor: ZP\ndate: 2023-04-19 16:40:35\ntags: Mockito\nsticky: true\n---\n```\n","source":"_posts/hexo的优化和美化.md","raw":"title: hexo的优化和美化\nauthor: ZP\ndate: 2023-04-19 17:13:17\ntags:\n---\n因为之前的文章只是介绍hexo的相关改造，实际跟工程一样，开发只占20%到30%，剩下的大头成本主要是维护和优化。所以说hexo的优化和美化也是一个可以研究的，比如说扩展功能，调整主题，安装插件等，来丰富博客的功能。\n\n### 主题设置\n我这边选的是NEXT主题，我们知道有一个配置文件_config.yml。主题对应也有这个设置，用来设置布局样式，展示按钮等。以下是主题的配置文件位置，后面我们很多的主题设置都要修改这个文件\n\n![主题配置文件位置](/images/hexo_next.png)\n\n\n#### NEXT主页样式\n\nnext有四种风格,在站点配置文件搜索字段Scheme Settings可以看到，\n```\nscheme: Muse\n#scheme: Mist\n#scheme: Pisces\n#scheme: Gemini\n```\n\n一般默认选择的是Muse，这里用的是四种：Gemini\n\n#### menu开启与设置\n设置完之后，发现整个博客是光秃秃的，看到别人的博客都有很多menu按钮。这些menu在哪里有呢，实际上在Next主题的配置文件具有对应的按钮在里面\n\n```\n# ---------------------------------------------------------------\n# Menu Settings\n# ---------------------------------------------------------------\n\n# Usage: `Key: /link/ || icon`\n# Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.\n# Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.\n# When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -> archives).\n# External url should start with http:// or https://\nmenu:\n  home: / || fa fa-home\n  about: /about/ || fa fa-user\n  tags: /tags/ || fa fa-tags\n  categories: /categories/ || fa fa-th\n  archives: /archives/ || fa fa-archive\n  schedule: /schedule/ || fa fa-calendar\n  sitemap: /sitemap.xml || fa fa-sitemap\n  commonweal: /404/ || fa fa-heartbeat\n```\n里面有些没有展示出来，是被注释了，我们解开注释就可以了。\n\n但是menu有了，但是点击报错跳到空白页面，这就需要我们自己设置，已分类和标签例子。\n\n刚开始我们点击这两个按钮会报错“Cannot GET XXX”错误，问题的原因是我们没有初始化，初始化具体的步骤：<br>\n\n1  创建对应的文件夹，可以通过命令在git bash 中输入以下代码创建相应的page：hexo new page \"tags\"hexo new page \"categories\"来创建文件夹。也可以手动创建文件夹，然后在里面创建index.md文件。\n\n\n\n2  在第一步完成后会在source文件夹中出现tags和categories的文件夹，在各自的文件夹里打开index.md文件进行修改(多加上一个type属性),标签的tags的index.md里面添加type: \"tags\"\n```js\n---\ntitle: tags\ndate: 2023-04-19 17:04:58\ntype: \"tags\"\n---\n\n```\n\n\n\n### 文章设置\n文件有很多属性，比如说tag标签，设置置顶文件等，一般来说这些属性都在对应的markdown文件的Front-matter部分。\n\n#### 文章置顶\n打开对应的文章文件，对应的目录是在source目录下面的_posts目录，里面保存的是我们的博客文章，文章也有对应的属性，在Front-matter里面设置的。我们通过设置sticky属性，设置为true即可置顶对应的这个文章。\n\n```\ntitle: Mockito实战\nauthor: ZP\ndate: 2023-04-19 16:40:35\ntags: Mockito\nsticky: true\n---\n```\n","slug":"hexo的优化和美化","published":1,"updated":"2023-04-19T10:10:34.572Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clgnsww0n0003i4vc5euhbgad","content":"<p>因为之前的文章只是介绍hexo的相关改造，实际跟工程一样，开发只占20%到30%，剩下的大头成本主要是维护和优化。所以说hexo的优化和美化也是一个可以研究的，比如说扩展功能，调整主题，安装插件等，来丰富博客的功能。</p>\n<h3 id=\"主题设置\"><a href=\"#主题设置\" class=\"headerlink\" title=\"主题设置\"></a>主题设置</h3><p>我这边选的是NEXT主题，我们知道有一个配置文件_config.yml。主题对应也有这个设置，用来设置布局样式，展示按钮等。以下是主题的配置文件位置，后面我们很多的主题设置都要修改这个文件</p>\n<p><img src=\"/images/hexo_next.png\" alt=\"主题配置文件位置\"></p>\n<h4 id=\"NEXT主页样式\"><a href=\"#NEXT主页样式\" class=\"headerlink\" title=\"NEXT主页样式\"></a>NEXT主页样式</h4><p>next有四种风格,在站点配置文件搜索字段Scheme Settings可以看到，</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheme: Muse</span><br><span class=\"line\">#scheme: Mist</span><br><span class=\"line\">#scheme: Pisces</span><br><span class=\"line\">#scheme: Gemini</span><br></pre></td></tr></table></figure>\n\n<p>一般默认选择的是Muse，这里用的是四种：Gemini</p>\n<h4 id=\"menu开启与设置\"><a href=\"#menu开启与设置\" class=\"headerlink\" title=\"menu开启与设置\"></a>menu开启与设置</h4><p>设置完之后，发现整个博客是光秃秃的，看到别人的博客都有很多menu按钮。这些menu在哪里有呢，实际上在Next主题的配置文件具有对应的按钮在里面</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># ---------------------------------------------------------------</span><br><span class=\"line\"># Menu Settings</span><br><span class=\"line\"># ---------------------------------------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\"># Usage: `Key: /link/ || icon`</span><br><span class=\"line\"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.</span><br><span class=\"line\"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span><br><span class=\"line\"># When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -&gt; archives).</span><br><span class=\"line\"># External url should start with http:// or https://</span><br><span class=\"line\">menu:</span><br><span class=\"line\">  home: / || fa fa-home</span><br><span class=\"line\">  about: /about/ || fa fa-user</span><br><span class=\"line\">  tags: /tags/ || fa fa-tags</span><br><span class=\"line\">  categories: /categories/ || fa fa-th</span><br><span class=\"line\">  archives: /archives/ || fa fa-archive</span><br><span class=\"line\">  schedule: /schedule/ || fa fa-calendar</span><br><span class=\"line\">  sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class=\"line\">  commonweal: /404/ || fa fa-heartbeat</span><br></pre></td></tr></table></figure>\n<p>里面有些没有展示出来，是被注释了，我们解开注释就可以了。</p>\n<p>但是menu有了，但是点击报错跳到空白页面，这就需要我们自己设置，已分类和标签例子。</p>\n<p>刚开始我们点击这两个按钮会报错“Cannot GET XXX”错误，问题的原因是我们没有初始化，初始化具体的步骤：<br></p>\n<p>1  创建对应的文件夹，可以通过命令在git bash 中输入以下代码创建相应的page：hexo new page “tags”hexo new page “categories”来创建文件夹。也可以手动创建文件夹，然后在里面创建index.md文件。</p>\n<p>2  在第一步完成后会在source文件夹中出现tags和categories的文件夹，在各自的文件夹里打开index.md文件进行修改(多加上一个type属性),标签的tags的index.md里面添加type: “tags”</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\"><span class=\"attr\">title</span>: tags</span><br><span class=\"line\"><span class=\"attr\">date</span>: <span class=\"number\">2023</span>-<span class=\"number\">04</span>-<span class=\"number\">19</span> <span class=\"number\">17</span>:<span class=\"number\">04</span>:<span class=\"number\">58</span></span><br><span class=\"line\"><span class=\"attr\">type</span>: <span class=\"string\">&quot;tags&quot;</span></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"文章设置\"><a href=\"#文章设置\" class=\"headerlink\" title=\"文章设置\"></a>文章设置</h3><p>文件有很多属性，比如说tag标签，设置置顶文件等，一般来说这些属性都在对应的markdown文件的Front-matter部分。</p>\n<h4 id=\"文章置顶\"><a href=\"#文章置顶\" class=\"headerlink\" title=\"文章置顶\"></a>文章置顶</h4><p>打开对应的文章文件，对应的目录是在source目录下面的_posts目录，里面保存的是我们的博客文章，文章也有对应的属性，在Front-matter里面设置的。我们通过设置sticky属性，设置为true即可置顶对应的这个文章。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: Mockito实战</span><br><span class=\"line\">author: ZP</span><br><span class=\"line\">date: 2023-04-19 16:40:35</span><br><span class=\"line\">tags: Mockito</span><br><span class=\"line\">sticky: true</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<p>因为之前的文章只是介绍hexo的相关改造，实际跟工程一样，开发只占20%到30%，剩下的大头成本主要是维护和优化。所以说hexo的优化和美化也是一个可以研究的，比如说扩展功能，调整主题，安装插件等，来丰富博客的功能。</p>\n<h3 id=\"主题设置\"><a href=\"#主题设置\" class=\"headerlink\" title=\"主题设置\"></a>主题设置</h3><p>我这边选的是NEXT主题，我们知道有一个配置文件_config.yml。主题对应也有这个设置，用来设置布局样式，展示按钮等。以下是主题的配置文件位置，后面我们很多的主题设置都要修改这个文件</p>\n<p><img src=\"/images/hexo_next.png\" alt=\"主题配置文件位置\"></p>\n<h4 id=\"NEXT主页样式\"><a href=\"#NEXT主页样式\" class=\"headerlink\" title=\"NEXT主页样式\"></a>NEXT主页样式</h4><p>next有四种风格,在站点配置文件搜索字段Scheme Settings可以看到，</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">scheme: Muse</span><br><span class=\"line\">#scheme: Mist</span><br><span class=\"line\">#scheme: Pisces</span><br><span class=\"line\">#scheme: Gemini</span><br></pre></td></tr></table></figure>\n\n<p>一般默认选择的是Muse，这里用的是四种：Gemini</p>\n<h4 id=\"menu开启与设置\"><a href=\"#menu开启与设置\" class=\"headerlink\" title=\"menu开启与设置\"></a>menu开启与设置</h4><p>设置完之后，发现整个博客是光秃秃的，看到别人的博客都有很多menu按钮。这些menu在哪里有呢，实际上在Next主题的配置文件具有对应的按钮在里面</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># ---------------------------------------------------------------</span><br><span class=\"line\"># Menu Settings</span><br><span class=\"line\"># ---------------------------------------------------------------</span><br><span class=\"line\"></span><br><span class=\"line\"># Usage: `Key: /link/ || icon`</span><br><span class=\"line\"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.</span><br><span class=\"line\"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span><br><span class=\"line\"># When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -&gt; archives).</span><br><span class=\"line\"># External url should start with http:// or https://</span><br><span class=\"line\">menu:</span><br><span class=\"line\">  home: / || fa fa-home</span><br><span class=\"line\">  about: /about/ || fa fa-user</span><br><span class=\"line\">  tags: /tags/ || fa fa-tags</span><br><span class=\"line\">  categories: /categories/ || fa fa-th</span><br><span class=\"line\">  archives: /archives/ || fa fa-archive</span><br><span class=\"line\">  schedule: /schedule/ || fa fa-calendar</span><br><span class=\"line\">  sitemap: /sitemap.xml || fa fa-sitemap</span><br><span class=\"line\">  commonweal: /404/ || fa fa-heartbeat</span><br></pre></td></tr></table></figure>\n<p>里面有些没有展示出来，是被注释了，我们解开注释就可以了。</p>\n<p>但是menu有了，但是点击报错跳到空白页面，这就需要我们自己设置，已分类和标签例子。</p>\n<p>刚开始我们点击这两个按钮会报错“Cannot GET XXX”错误，问题的原因是我们没有初始化，初始化具体的步骤：<br></p>\n<p>1  创建对应的文件夹，可以通过命令在git bash 中输入以下代码创建相应的page：hexo new page “tags”hexo new page “categories”来创建文件夹。也可以手动创建文件夹，然后在里面创建index.md文件。</p>\n<p>2  在第一步完成后会在source文件夹中出现tags和categories的文件夹，在各自的文件夹里打开index.md文件进行修改(多加上一个type属性),标签的tags的index.md里面添加type: “tags”</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">---</span><br><span class=\"line\"><span class=\"attr\">title</span>: tags</span><br><span class=\"line\"><span class=\"attr\">date</span>: <span class=\"number\">2023</span>-<span class=\"number\">04</span>-<span class=\"number\">19</span> <span class=\"number\">17</span>:<span class=\"number\">04</span>:<span class=\"number\">58</span></span><br><span class=\"line\"><span class=\"attr\">type</span>: <span class=\"string\">&quot;tags&quot;</span></span><br><span class=\"line\">---</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"文章设置\"><a href=\"#文章设置\" class=\"headerlink\" title=\"文章设置\"></a>文章设置</h3><p>文件有很多属性，比如说tag标签，设置置顶文件等，一般来说这些属性都在对应的markdown文件的Front-matter部分。</p>\n<h4 id=\"文章置顶\"><a href=\"#文章置顶\" class=\"headerlink\" title=\"文章置顶\"></a>文章置顶</h4><p>打开对应的文章文件，对应的目录是在source目录下面的_posts目录，里面保存的是我们的博客文章，文章也有对应的属性，在Front-matter里面设置的。我们通过设置sticky属性，设置为true即可置顶对应的这个文章。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">title: Mockito实战</span><br><span class=\"line\">author: ZP</span><br><span class=\"line\">date: 2023-04-19 16:40:35</span><br><span class=\"line\">tags: Mockito</span><br><span class=\"line\">sticky: true</span><br><span class=\"line\">---</span><br></pre></td></tr></table></figure>\n"},{"title":"红黑树","author":"ZP","date":"2023-02-28T02:54:11.000Z","_content":"红黑树，应该是一种我们听到的比较多的一个数据结构，比如说JDK1.8的HashMap，在之前数组加链表的结构的基础上，如果链表太长，就会转为红黑树。作为一个比较复杂的数据结构，但是本身底子还是二叉树。但是为什么搞一个单独的二叉树，难道红黑树就是二叉树染个颜色吗，他和二叉树区别什么，意义何在有什么作用？红黑树和我们另一个见到比较多的B+树有什么区别，想我们知道B+树用的最知名的一个案例就是关系型数据库，红黑树可不可以取而代之？\n\n这里就是更整体的了解红黑树，而不是单独一个角度去认识红黑树，比如说红黑树的结构，为什么弄一个这么“拧巴”的二叉树。左旋右旋的目的，和其他类似的数据结构对比。\n\n\n### 红黑树基础：二叉树\n红黑树本身结构，在不考虑节点颜色，以及先加入元素的左旋右旋的动作等。第一眼看上去，这就是二叉树，所以要先了解二叉树，才能有个对红黑树的基础认知，以及为什么要单独搞出来一个红黑树，用它来解决一些什么具体问题，为什么我们一些源码底层采用红黑树，而不是采用更简单的二叉树。\n\n\n\n","source":"_posts/红黑树.md","raw":"title: 红黑树\nauthor: ZP\ndate: 2023-02-28 10:54:11\ntags:\n---\n红黑树，应该是一种我们听到的比较多的一个数据结构，比如说JDK1.8的HashMap，在之前数组加链表的结构的基础上，如果链表太长，就会转为红黑树。作为一个比较复杂的数据结构，但是本身底子还是二叉树。但是为什么搞一个单独的二叉树，难道红黑树就是二叉树染个颜色吗，他和二叉树区别什么，意义何在有什么作用？红黑树和我们另一个见到比较多的B+树有什么区别，想我们知道B+树用的最知名的一个案例就是关系型数据库，红黑树可不可以取而代之？\n\n这里就是更整体的了解红黑树，而不是单独一个角度去认识红黑树，比如说红黑树的结构，为什么弄一个这么“拧巴”的二叉树。左旋右旋的目的，和其他类似的数据结构对比。\n\n\n### 红黑树基础：二叉树\n红黑树本身结构，在不考虑节点颜色，以及先加入元素的左旋右旋的动作等。第一眼看上去，这就是二叉树，所以要先了解二叉树，才能有个对红黑树的基础认知，以及为什么要单独搞出来一个红黑树，用它来解决一些什么具体问题，为什么我们一些源码底层采用红黑树，而不是采用更简单的二叉树。\n\n\n\n","slug":"红黑树","published":1,"updated":"2023-04-19T10:10:34.573Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clgnsww0q0005i4vchrmede0w","content":"<p>红黑树，应该是一种我们听到的比较多的一个数据结构，比如说JDK1.8的HashMap，在之前数组加链表的结构的基础上，如果链表太长，就会转为红黑树。作为一个比较复杂的数据结构，但是本身底子还是二叉树。但是为什么搞一个单独的二叉树，难道红黑树就是二叉树染个颜色吗，他和二叉树区别什么，意义何在有什么作用？红黑树和我们另一个见到比较多的B+树有什么区别，想我们知道B+树用的最知名的一个案例就是关系型数据库，红黑树可不可以取而代之？</p>\n<p>这里就是更整体的了解红黑树，而不是单独一个角度去认识红黑树，比如说红黑树的结构，为什么弄一个这么“拧巴”的二叉树。左旋右旋的目的，和其他类似的数据结构对比。</p>\n<h3 id=\"红黑树基础：二叉树\"><a href=\"#红黑树基础：二叉树\" class=\"headerlink\" title=\"红黑树基础：二叉树\"></a>红黑树基础：二叉树</h3><p>红黑树本身结构，在不考虑节点颜色，以及先加入元素的左旋右旋的动作等。第一眼看上去，这就是二叉树，所以要先了解二叉树，才能有个对红黑树的基础认知，以及为什么要单独搞出来一个红黑树，用它来解决一些什么具体问题，为什么我们一些源码底层采用红黑树，而不是采用更简单的二叉树。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>红黑树，应该是一种我们听到的比较多的一个数据结构，比如说JDK1.8的HashMap，在之前数组加链表的结构的基础上，如果链表太长，就会转为红黑树。作为一个比较复杂的数据结构，但是本身底子还是二叉树。但是为什么搞一个单独的二叉树，难道红黑树就是二叉树染个颜色吗，他和二叉树区别什么，意义何在有什么作用？红黑树和我们另一个见到比较多的B+树有什么区别，想我们知道B+树用的最知名的一个案例就是关系型数据库，红黑树可不可以取而代之？</p>\n<p>这里就是更整体的了解红黑树，而不是单独一个角度去认识红黑树，比如说红黑树的结构，为什么弄一个这么“拧巴”的二叉树。左旋右旋的目的，和其他类似的数据结构对比。</p>\n<h3 id=\"红黑树基础：二叉树\"><a href=\"#红黑树基础：二叉树\" class=\"headerlink\" title=\"红黑树基础：二叉树\"></a>红黑树基础：二叉树</h3><p>红黑树本身结构，在不考虑节点颜色，以及先加入元素的左旋右旋的动作等。第一眼看上去，这就是二叉树，所以要先了解二叉树，才能有个对红黑树的基础认知，以及为什么要单独搞出来一个红黑树，用它来解决一些什么具体问题，为什么我们一些源码底层采用红黑树，而不是采用更简单的二叉树。</p>\n"},{"title":"关于hexo博客的可迁移化改造","date":"2022-05-25T10:10:19.000Z","_content":"### 为什么这次又选择hexo\n\n实际上这种静态博客我之前已经放弃了，之后的一段时间自己用的是wordpress和其他的平台，好处是wordpress动态，自己建站部署，爱折腾的话真的很多可以拿来玩的，可以直接在页面去编辑文章。\n写作平台同样也支持在线编辑，而且SEO优化做的不错，比如某XXDN，即使随便写写也会有人看到，实际上这种反馈感还蛮不错的。\n但是呢，自己动态博客网站，域名过期没有去搞，然后在一次自己想玩某个东西没注意，把自己部署网站的服务器给重装系统了，直接GG。\n国内目前，审核机制的原因，可能会出现滞后性，关键是服务提供商有时候跟抽风一样，觉得有必要不把鸡蛋放在一个篮子里。\n\n而目前，静态博客直接挂载在Github上，不用担心自己服务器误操作，比较省心所以又回来走“回头路”。\n\n列一下静态博客网站的优缺点：\n优点：\n1 简单，很多甚至不需要服务器，直接挂在Github Page就可以了\n2 选择的框架足够多，有node.js的Hexo，ruby的Jekyll，go的hugo，这些都是使用非常广泛的，社区活跃插件足够多，主题更丰富（动态的目前只有PHP的wordpress，其他的都比较小众，很多都是自己手敲的，受众不多）\n\n缺点\n1  没有wordpress那样的后台，不能在线编辑，需要自己本地生成编辑然后再去服务器或者Github上把编译好的传上去。\n2  如果换电脑或者系统，可能就要重新弄了\n<!--more-->\n就像上边hugo hexo Jekyll这些都是比较流行的，用的比较多，我为什么选择hexo呢？很简单，就是之前部署过，实际上我推荐的是hugo，号称编译最快\n而且是go语言，我也比较感兴趣想试水，再加上是以上几种在GitHub上star最多的，应该是首选。\n\n但是，鉴于之前GitHub Page已经用了hexo，那就选择这个先玩明白hexo再说，未来的架构选择肯定还是hugo----动态wordpress----动态更好的或者自己手撸。\n\n### hexo改造\n这次改造的重点是针对我之前对静态博客弃坑的痛点：可迁移，异地编译\n这里的迁移指的不只是，说我写的博客可以迁出去，实际上现在主流的自建静态/动态博客框架，或者博客运营平台都支持markdown文档。<br>\n可迁移就是我换电脑了，或者说我用别人的电脑也可以编辑文章给自己的博客更新，这一点在我刚开始使用hexo，发现自己本地配置环境也就罢了。\n很多东西传到GitHub Page只是编译好的静态文件，你换个电脑可能就没办法根据你GitHub Page上的东西继续。\n\n所以这次的改造其实是通过Git分支管理来解决这个问题\n参照的主要文章是:<br>\n\n<a href=\"https://liujiaboy.github.io/2020/03/06/Github-Hexo/\" title=\"Hexo的可迁移改造\">Hexo的可迁移改造</a><br>\n\nPS:\n这里只要配置好之后，在部署命令执行之后就可以修改同步到gituhb上\n```\n部署命令：\nhexo generate --deploy\nhexo deploy --generate\n\n```\n效果如图\n![avatar](https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/166eb5abfcf8115e01245ec1c2db1b2b96155138.png)\n\n\n\n\n主要的思路就是，Git创建分支：master，hexo两个分支\nmaster分支主要是hexo编译后的静态文件，主要是为了挂载在Github Page上的（这个是可以在_config.yml上面指定的）\n而新创建的hexo分支，则是你本地hexo的全部备份，这样你换电脑重装系统，只需要拉一下这个分支，配置好node.js环境，然后稍微做一些操作就可以，在新的电脑上生成文件编译了。<br>\n\n这个思路其实可以套用在其他的静态博客挂载的Github Page上的，对了最好把全量备份的分支设置成默认分支，这样以后直接来下来直接改，否则拉下来的master分支都是编译好的文件用来直接展示，没啥用。\n\n\n\n\n### hexo的一些设置\nhexo涉及到一些基本操作，需要自己手动设置，比如说要换成自己的域名，更换个主题。而且Hexo插件真的很丰富，少去很多自己动手去修改的要去实现的功能\n还有一些是需要自己定制化的一些，比如说默认展示文章全部的就挺坑爹的，我们可以设置为预览的形式。\n(实际上由于主题限制，像有些yml配置可能不生效，不如这个缩略的，可能要在文章里面添加more标签，其实wordpress也这样)\n\n```\nauto_excerpt:\nenable: true #将原有的false改为true\nlength: 300  #设置预览的字数\n```\n\n还有就是可以依靠安装插件来是实现某些功能，比如说统计字数\n\n```\nnpm install hexo-wordcount --save\n```\n\n#### admin插件在线编辑\n这里推荐一个插件，因为静态页面，很多操作还要通过命令，比如生成新的文章，发布这些。博客以内容为主，如何简化写作的，尤其是我不想去post目录里面去修改md文章，能解决在线编辑这个问题。我这边添加一个插件hexo-admin\n\n具体的步骤：\n（1）跳转到对应hexo的目录\n\n（2）安装admin插件\n```\nnpm install --save hexo-admin\n```\n（3）启动服务器，进入到admin,就可以进入在线编辑页\nlocalhost:4000/admin\n\n#### 统计浏览量\n一般来说，博客都会有统计的一些功能，比如说访客人数和总访问量。\n\n以下是通过busuanzi来完成的，我这还是next主题，就更方便了，连脚本都不需要安装。\n\n<a href=\"https://chrischen0405.github.io/2018/09/11/post20180911/\" title=\"Hexo的可迁移改造\">hexo页脚添加访客人数和总访问量</a><br>\n\n\n以下是关于一些功能的设置以及hexo的插件列表地址：\n\n<a href=\"https://zhuanlan.zhihu.com/p/33616481\" title=\"知乎上的一个关于hexo的优化设置\">知乎上的一个关于hexo的优化设置</a><br>\n<a href=\"https://hexo.io/plugins/\" title=\"Hexo的官方插件列表地址\">Hexo的官方插件列表地址</a><br>","source":"_posts/关于hexo博客的可迁移化改造.md","raw":"title: 关于hexo博客的可迁移化改造\ndate: 2022-05-25 18:10:19\ntags: hexo\n---\n### 为什么这次又选择hexo\n\n实际上这种静态博客我之前已经放弃了，之后的一段时间自己用的是wordpress和其他的平台，好处是wordpress动态，自己建站部署，爱折腾的话真的很多可以拿来玩的，可以直接在页面去编辑文章。\n写作平台同样也支持在线编辑，而且SEO优化做的不错，比如某XXDN，即使随便写写也会有人看到，实际上这种反馈感还蛮不错的。\n但是呢，自己动态博客网站，域名过期没有去搞，然后在一次自己想玩某个东西没注意，把自己部署网站的服务器给重装系统了，直接GG。\n国内目前，审核机制的原因，可能会出现滞后性，关键是服务提供商有时候跟抽风一样，觉得有必要不把鸡蛋放在一个篮子里。\n\n而目前，静态博客直接挂载在Github上，不用担心自己服务器误操作，比较省心所以又回来走“回头路”。\n\n列一下静态博客网站的优缺点：\n优点：\n1 简单，很多甚至不需要服务器，直接挂在Github Page就可以了\n2 选择的框架足够多，有node.js的Hexo，ruby的Jekyll，go的hugo，这些都是使用非常广泛的，社区活跃插件足够多，主题更丰富（动态的目前只有PHP的wordpress，其他的都比较小众，很多都是自己手敲的，受众不多）\n\n缺点\n1  没有wordpress那样的后台，不能在线编辑，需要自己本地生成编辑然后再去服务器或者Github上把编译好的传上去。\n2  如果换电脑或者系统，可能就要重新弄了\n<!--more-->\n就像上边hugo hexo Jekyll这些都是比较流行的，用的比较多，我为什么选择hexo呢？很简单，就是之前部署过，实际上我推荐的是hugo，号称编译最快\n而且是go语言，我也比较感兴趣想试水，再加上是以上几种在GitHub上star最多的，应该是首选。\n\n但是，鉴于之前GitHub Page已经用了hexo，那就选择这个先玩明白hexo再说，未来的架构选择肯定还是hugo----动态wordpress----动态更好的或者自己手撸。\n\n### hexo改造\n这次改造的重点是针对我之前对静态博客弃坑的痛点：可迁移，异地编译\n这里的迁移指的不只是，说我写的博客可以迁出去，实际上现在主流的自建静态/动态博客框架，或者博客运营平台都支持markdown文档。<br>\n可迁移就是我换电脑了，或者说我用别人的电脑也可以编辑文章给自己的博客更新，这一点在我刚开始使用hexo，发现自己本地配置环境也就罢了。\n很多东西传到GitHub Page只是编译好的静态文件，你换个电脑可能就没办法根据你GitHub Page上的东西继续。\n\n所以这次的改造其实是通过Git分支管理来解决这个问题\n参照的主要文章是:<br>\n\n<a href=\"https://liujiaboy.github.io/2020/03/06/Github-Hexo/\" title=\"Hexo的可迁移改造\">Hexo的可迁移改造</a><br>\n\nPS:\n这里只要配置好之后，在部署命令执行之后就可以修改同步到gituhb上\n```\n部署命令：\nhexo generate --deploy\nhexo deploy --generate\n\n```\n效果如图\n![avatar](https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/166eb5abfcf8115e01245ec1c2db1b2b96155138.png)\n\n\n\n\n主要的思路就是，Git创建分支：master，hexo两个分支\nmaster分支主要是hexo编译后的静态文件，主要是为了挂载在Github Page上的（这个是可以在_config.yml上面指定的）\n而新创建的hexo分支，则是你本地hexo的全部备份，这样你换电脑重装系统，只需要拉一下这个分支，配置好node.js环境，然后稍微做一些操作就可以，在新的电脑上生成文件编译了。<br>\n\n这个思路其实可以套用在其他的静态博客挂载的Github Page上的，对了最好把全量备份的分支设置成默认分支，这样以后直接来下来直接改，否则拉下来的master分支都是编译好的文件用来直接展示，没啥用。\n\n\n\n\n### hexo的一些设置\nhexo涉及到一些基本操作，需要自己手动设置，比如说要换成自己的域名，更换个主题。而且Hexo插件真的很丰富，少去很多自己动手去修改的要去实现的功能\n还有一些是需要自己定制化的一些，比如说默认展示文章全部的就挺坑爹的，我们可以设置为预览的形式。\n(实际上由于主题限制，像有些yml配置可能不生效，不如这个缩略的，可能要在文章里面添加more标签，其实wordpress也这样)\n\n```\nauto_excerpt:\nenable: true #将原有的false改为true\nlength: 300  #设置预览的字数\n```\n\n还有就是可以依靠安装插件来是实现某些功能，比如说统计字数\n\n```\nnpm install hexo-wordcount --save\n```\n\n#### admin插件在线编辑\n这里推荐一个插件，因为静态页面，很多操作还要通过命令，比如生成新的文章，发布这些。博客以内容为主，如何简化写作的，尤其是我不想去post目录里面去修改md文章，能解决在线编辑这个问题。我这边添加一个插件hexo-admin\n\n具体的步骤：\n（1）跳转到对应hexo的目录\n\n（2）安装admin插件\n```\nnpm install --save hexo-admin\n```\n（3）启动服务器，进入到admin,就可以进入在线编辑页\nlocalhost:4000/admin\n\n#### 统计浏览量\n一般来说，博客都会有统计的一些功能，比如说访客人数和总访问量。\n\n以下是通过busuanzi来完成的，我这还是next主题，就更方便了，连脚本都不需要安装。\n\n<a href=\"https://chrischen0405.github.io/2018/09/11/post20180911/\" title=\"Hexo的可迁移改造\">hexo页脚添加访客人数和总访问量</a><br>\n\n\n以下是关于一些功能的设置以及hexo的插件列表地址：\n\n<a href=\"https://zhuanlan.zhihu.com/p/33616481\" title=\"知乎上的一个关于hexo的优化设置\">知乎上的一个关于hexo的优化设置</a><br>\n<a href=\"https://hexo.io/plugins/\" title=\"Hexo的官方插件列表地址\">Hexo的官方插件列表地址</a><br>","slug":"关于hexo博客的可迁移化改造","published":1,"updated":"2023-04-19T10:10:34.573Z","comments":1,"layout":"post","photos":[],"link":"","_id":"clgnsww0r0006i4vc5t9danwv","content":"<h3 id=\"为什么这次又选择hexo\"><a href=\"#为什么这次又选择hexo\" class=\"headerlink\" title=\"为什么这次又选择hexo\"></a>为什么这次又选择hexo</h3><p>实际上这种静态博客我之前已经放弃了，之后的一段时间自己用的是wordpress和其他的平台，好处是wordpress动态，自己建站部署，爱折腾的话真的很多可以拿来玩的，可以直接在页面去编辑文章。<br>写作平台同样也支持在线编辑，而且SEO优化做的不错，比如某XXDN，即使随便写写也会有人看到，实际上这种反馈感还蛮不错的。<br>但是呢，自己动态博客网站，域名过期没有去搞，然后在一次自己想玩某个东西没注意，把自己部署网站的服务器给重装系统了，直接GG。<br>国内目前，审核机制的原因，可能会出现滞后性，关键是服务提供商有时候跟抽风一样，觉得有必要不把鸡蛋放在一个篮子里。</p>\n<p>而目前，静态博客直接挂载在Github上，不用担心自己服务器误操作，比较省心所以又回来走“回头路”。</p>\n<p>列一下静态博客网站的优缺点：<br>优点：<br>1 简单，很多甚至不需要服务器，直接挂在Github Page就可以了<br>2 选择的框架足够多，有node.js的Hexo，ruby的Jekyll，go的hugo，这些都是使用非常广泛的，社区活跃插件足够多，主题更丰富（动态的目前只有PHP的wordpress，其他的都比较小众，很多都是自己手敲的，受众不多）</p>\n<p>缺点<br>1  没有wordpress那样的后台，不能在线编辑，需要自己本地生成编辑然后再去服务器或者Github上把编译好的传上去。<br>2  如果换电脑或者系统，可能就要重新弄了</p>\n<span id=\"more\"></span>\n<p>就像上边hugo hexo Jekyll这些都是比较流行的，用的比较多，我为什么选择hexo呢？很简单，就是之前部署过，实际上我推荐的是hugo，号称编译最快<br>而且是go语言，我也比较感兴趣想试水，再加上是以上几种在GitHub上star最多的，应该是首选。</p>\n<p>但是，鉴于之前GitHub Page已经用了hexo，那就选择这个先玩明白hexo再说，未来的架构选择肯定还是hugo—-动态wordpress—-动态更好的或者自己手撸。</p>\n<h3 id=\"hexo改造\"><a href=\"#hexo改造\" class=\"headerlink\" title=\"hexo改造\"></a>hexo改造</h3><p>这次改造的重点是针对我之前对静态博客弃坑的痛点：可迁移，异地编译<br>这里的迁移指的不只是，说我写的博客可以迁出去，实际上现在主流的自建静态&#x2F;动态博客框架，或者博客运营平台都支持markdown文档。<br><br>可迁移就是我换电脑了，或者说我用别人的电脑也可以编辑文章给自己的博客更新，这一点在我刚开始使用hexo，发现自己本地配置环境也就罢了。<br>很多东西传到GitHub Page只是编译好的静态文件，你换个电脑可能就没办法根据你GitHub Page上的东西继续。</p>\n<p>所以这次的改造其实是通过Git分支管理来解决这个问题<br>参照的主要文章是:<br></p>\n<p><a href=\"https://liujiaboy.github.io/2020/03/06/Github-Hexo/\" title=\"Hexo的可迁移改造\">Hexo的可迁移改造</a><br></p>\n<p>PS:<br>这里只要配置好之后，在部署命令执行之后就可以修改同步到gituhb上</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">部署命令：</span><br><span class=\"line\">hexo generate --deploy</span><br><span class=\"line\">hexo deploy --generate</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>效果如图<br><img src=\"https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/166eb5abfcf8115e01245ec1c2db1b2b96155138.png\" alt=\"avatar\"></p>\n<p>主要的思路就是，Git创建分支：master，hexo两个分支<br>master分支主要是hexo编译后的静态文件，主要是为了挂载在Github Page上的（这个是可以在_config.yml上面指定的）<br>而新创建的hexo分支，则是你本地hexo的全部备份，这样你换电脑重装系统，只需要拉一下这个分支，配置好node.js环境，然后稍微做一些操作就可以，在新的电脑上生成文件编译了。<br></p>\n<p>这个思路其实可以套用在其他的静态博客挂载的Github Page上的，对了最好把全量备份的分支设置成默认分支，这样以后直接来下来直接改，否则拉下来的master分支都是编译好的文件用来直接展示，没啥用。</p>\n<h3 id=\"hexo的一些设置\"><a href=\"#hexo的一些设置\" class=\"headerlink\" title=\"hexo的一些设置\"></a>hexo的一些设置</h3><p>hexo涉及到一些基本操作，需要自己手动设置，比如说要换成自己的域名，更换个主题。而且Hexo插件真的很丰富，少去很多自己动手去修改的要去实现的功能<br>还有一些是需要自己定制化的一些，比如说默认展示文章全部的就挺坑爹的，我们可以设置为预览的形式。<br>(实际上由于主题限制，像有些yml配置可能不生效，不如这个缩略的，可能要在文章里面添加more标签，其实wordpress也这样)</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auto_excerpt:</span><br><span class=\"line\">enable: true #将原有的false改为true</span><br><span class=\"line\">length: 300  #设置预览的字数</span><br></pre></td></tr></table></figure>\n\n<p>还有就是可以依靠安装插件来是实现某些功能，比如说统计字数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"admin插件在线编辑\"><a href=\"#admin插件在线编辑\" class=\"headerlink\" title=\"admin插件在线编辑\"></a>admin插件在线编辑</h4><p>这里推荐一个插件，因为静态页面，很多操作还要通过命令，比如生成新的文章，发布这些。博客以内容为主，如何简化写作的，尤其是我不想去post目录里面去修改md文章，能解决在线编辑这个问题。我这边添加一个插件hexo-admin</p>\n<p>具体的步骤：<br>（1）跳转到对应hexo的目录</p>\n<p>（2）安装admin插件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-admin</span><br></pre></td></tr></table></figure>\n<p>（3）启动服务器，进入到admin,就可以进入在线编辑页<br>localhost:4000&#x2F;admin</p>\n<h4 id=\"统计浏览量\"><a href=\"#统计浏览量\" class=\"headerlink\" title=\"统计浏览量\"></a>统计浏览量</h4><p>一般来说，博客都会有统计的一些功能，比如说访客人数和总访问量。</p>\n<p>以下是通过busuanzi来完成的，我这还是next主题，就更方便了，连脚本都不需要安装。</p>\n<p><a href=\"https://chrischen0405.github.io/2018/09/11/post20180911/\" title=\"Hexo的可迁移改造\">hexo页脚添加访客人数和总访问量</a><br></p>\n<p>以下是关于一些功能的设置以及hexo的插件列表地址：</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/33616481\" title=\"知乎上的一个关于hexo的优化设置\">知乎上的一个关于hexo的优化设置</a><br><br><a href=\"https://hexo.io/plugins/\" title=\"Hexo的官方插件列表地址\">Hexo的官方插件列表地址</a><br></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"为什么这次又选择hexo\"><a href=\"#为什么这次又选择hexo\" class=\"headerlink\" title=\"为什么这次又选择hexo\"></a>为什么这次又选择hexo</h3><p>实际上这种静态博客我之前已经放弃了，之后的一段时间自己用的是wordpress和其他的平台，好处是wordpress动态，自己建站部署，爱折腾的话真的很多可以拿来玩的，可以直接在页面去编辑文章。<br>写作平台同样也支持在线编辑，而且SEO优化做的不错，比如某XXDN，即使随便写写也会有人看到，实际上这种反馈感还蛮不错的。<br>但是呢，自己动态博客网站，域名过期没有去搞，然后在一次自己想玩某个东西没注意，把自己部署网站的服务器给重装系统了，直接GG。<br>国内目前，审核机制的原因，可能会出现滞后性，关键是服务提供商有时候跟抽风一样，觉得有必要不把鸡蛋放在一个篮子里。</p>\n<p>而目前，静态博客直接挂载在Github上，不用担心自己服务器误操作，比较省心所以又回来走“回头路”。</p>\n<p>列一下静态博客网站的优缺点：<br>优点：<br>1 简单，很多甚至不需要服务器，直接挂在Github Page就可以了<br>2 选择的框架足够多，有node.js的Hexo，ruby的Jekyll，go的hugo，这些都是使用非常广泛的，社区活跃插件足够多，主题更丰富（动态的目前只有PHP的wordpress，其他的都比较小众，很多都是自己手敲的，受众不多）</p>\n<p>缺点<br>1  没有wordpress那样的后台，不能在线编辑，需要自己本地生成编辑然后再去服务器或者Github上把编译好的传上去。<br>2  如果换电脑或者系统，可能就要重新弄了</p>","more":"<p>就像上边hugo hexo Jekyll这些都是比较流行的，用的比较多，我为什么选择hexo呢？很简单，就是之前部署过，实际上我推荐的是hugo，号称编译最快<br>而且是go语言，我也比较感兴趣想试水，再加上是以上几种在GitHub上star最多的，应该是首选。</p>\n<p>但是，鉴于之前GitHub Page已经用了hexo，那就选择这个先玩明白hexo再说，未来的架构选择肯定还是hugo—-动态wordpress—-动态更好的或者自己手撸。</p>\n<h3 id=\"hexo改造\"><a href=\"#hexo改造\" class=\"headerlink\" title=\"hexo改造\"></a>hexo改造</h3><p>这次改造的重点是针对我之前对静态博客弃坑的痛点：可迁移，异地编译<br>这里的迁移指的不只是，说我写的博客可以迁出去，实际上现在主流的自建静态&#x2F;动态博客框架，或者博客运营平台都支持markdown文档。<br><br>可迁移就是我换电脑了，或者说我用别人的电脑也可以编辑文章给自己的博客更新，这一点在我刚开始使用hexo，发现自己本地配置环境也就罢了。<br>很多东西传到GitHub Page只是编译好的静态文件，你换个电脑可能就没办法根据你GitHub Page上的东西继续。</p>\n<p>所以这次的改造其实是通过Git分支管理来解决这个问题<br>参照的主要文章是:<br></p>\n<p><a href=\"https://liujiaboy.github.io/2020/03/06/Github-Hexo/\" title=\"Hexo的可迁移改造\">Hexo的可迁移改造</a><br></p>\n<p>PS:<br>这里只要配置好之后，在部署命令执行之后就可以修改同步到gituhb上</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">部署命令：</span><br><span class=\"line\">hexo generate --deploy</span><br><span class=\"line\">hexo deploy --generate</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>效果如图<br><img src=\"https://images.weserv.nl/?url=https://article.biliimg.com/bfs/article/166eb5abfcf8115e01245ec1c2db1b2b96155138.png\" alt=\"avatar\"></p>\n<p>主要的思路就是，Git创建分支：master，hexo两个分支<br>master分支主要是hexo编译后的静态文件，主要是为了挂载在Github Page上的（这个是可以在_config.yml上面指定的）<br>而新创建的hexo分支，则是你本地hexo的全部备份，这样你换电脑重装系统，只需要拉一下这个分支，配置好node.js环境，然后稍微做一些操作就可以，在新的电脑上生成文件编译了。<br></p>\n<p>这个思路其实可以套用在其他的静态博客挂载的Github Page上的，对了最好把全量备份的分支设置成默认分支，这样以后直接来下来直接改，否则拉下来的master分支都是编译好的文件用来直接展示，没啥用。</p>\n<h3 id=\"hexo的一些设置\"><a href=\"#hexo的一些设置\" class=\"headerlink\" title=\"hexo的一些设置\"></a>hexo的一些设置</h3><p>hexo涉及到一些基本操作，需要自己手动设置，比如说要换成自己的域名，更换个主题。而且Hexo插件真的很丰富，少去很多自己动手去修改的要去实现的功能<br>还有一些是需要自己定制化的一些，比如说默认展示文章全部的就挺坑爹的，我们可以设置为预览的形式。<br>(实际上由于主题限制，像有些yml配置可能不生效，不如这个缩略的，可能要在文章里面添加more标签，其实wordpress也这样)</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">auto_excerpt:</span><br><span class=\"line\">enable: true #将原有的false改为true</span><br><span class=\"line\">length: 300  #设置预览的字数</span><br></pre></td></tr></table></figure>\n\n<p>还有就是可以依靠安装插件来是实现某些功能，比如说统计字数</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-wordcount --save</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"admin插件在线编辑\"><a href=\"#admin插件在线编辑\" class=\"headerlink\" title=\"admin插件在线编辑\"></a>admin插件在线编辑</h4><p>这里推荐一个插件，因为静态页面，很多操作还要通过命令，比如生成新的文章，发布这些。博客以内容为主，如何简化写作的，尤其是我不想去post目录里面去修改md文章，能解决在线编辑这个问题。我这边添加一个插件hexo-admin</p>\n<p>具体的步骤：<br>（1）跳转到对应hexo的目录</p>\n<p>（2）安装admin插件</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install --save hexo-admin</span><br></pre></td></tr></table></figure>\n<p>（3）启动服务器，进入到admin,就可以进入在线编辑页<br>localhost:4000&#x2F;admin</p>\n<h4 id=\"统计浏览量\"><a href=\"#统计浏览量\" class=\"headerlink\" title=\"统计浏览量\"></a>统计浏览量</h4><p>一般来说，博客都会有统计的一些功能，比如说访客人数和总访问量。</p>\n<p>以下是通过busuanzi来完成的，我这还是next主题，就更方便了，连脚本都不需要安装。</p>\n<p><a href=\"https://chrischen0405.github.io/2018/09/11/post20180911/\" title=\"Hexo的可迁移改造\">hexo页脚添加访客人数和总访问量</a><br></p>\n<p>以下是关于一些功能的设置以及hexo的插件列表地址：</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/33616481\" title=\"知乎上的一个关于hexo的优化设置\">知乎上的一个关于hexo的优化设置</a><br><br><a href=\"https://hexo.io/plugins/\" title=\"Hexo的官方插件列表地址\">Hexo的官方插件列表地址</a><br></p>"},{"title":"Java web工程的Jar包启动以及一下要注意的问题","author":"ZP","date":"2024-02-24T06:05:24.000Z","_content":"现在SpringBoot工程越来越常见，这个JAR文件包含了应用程序所有的依赖，以及一个内嵌的Servlet容器（如Tomcat或Jetty）。这意味着你可以像运行一个普通的Java应用程序一样运行你的Spring Boot应用，而不需要额外的Web服务器或应用服务器。\n\n也就是说对应之前最早的像SSM这样的工程不一样，不需要放在tomcat里面去启动web工程。我们SpringBoot的web工程直接通过命令行形式就可以启动。\n\n\n打包过程：\n\n我们选择到对应的web工程模块，通过maven命令来打包，pom文件对应的打包形式也是jar包\n\n```\n    <packaging>jar</packaging>\n```\n\n我们用idea现成的工具就可以打包，在IDEA中进行打包操作。选择 \"View\" > \"Tool Windows\" > \"Maven\"，在打开的Maven窗口中，展开 \"Lifecycle\"，然后双击 \"clean\" 和 \"package\"。\n\n\n一般来说打的jar包位置都会在maven打包命令执行时会输出在命令行里，你也可以在对应的项目目录里面去找，会有对应的target包里面有。\n\n执行jar包:\n我们找到对应的jar包的位置，可以直接在idea的命令行里面执行java的jar命令来执行启动jar包。\n\n```\njava -jar filename.jar\n\n比如\njava -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar      \n```\n\n有的时候我们会有多种环境配置文件，我们可以指定对应的执行环境配置：\n\n```\njava -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar --spring.profiles.active=t1   \n```\n如果是web工程，你可以像本地启动tomcat的web项目一样，去检查项目是否是正式启动。\n\n需要注意的问题：\njar和war包有什么区别？\n其实war包就是一种特殊的jar包，JAR文件通常包含Java类文件（.class文件）和相关的元数据和资源（如文本、图片等）。它们可以包含任何你想要打包的内容，例如：Java库、应用程序等。它是Java应用程序的常见发布格式，可以被Java运行时环境（JRE）直接执行。\n\nwar包就是用于打包Java Web应用程序。WAR文件的结构遵循Java EE标准，包含了Web应用程序需要的所有内容，如：JSP、Java类、图片、库文件（lib文件夹下的JAR文件）、部署描述符（WEB-INF/web.xml）等。WAR文件通常被部署在一个支持Java EE的Web服务器或应用服务器（如Tomcat、Jetty、GlassFish、JBoss等）上。\n\n所以如果你的web工程时现在使用比较广泛的Spring Boot的web工程，jar包就可以，因为他内嵌了一个web服务器在里面。如果你的是旧的需要依赖web服务器的只能用war包，要通过传统方式来启动。\n\nSpring Boot多个模块形式，打包web工程模块并启动，但是改动没有生效？\n\nweb工程是多种模块/module的形式，这些模块是依赖关系，如果我们的修改不是对应web模块，我们打包的module模块的jar包是没有更新修改，因为jar包里面对应修改的依赖jar包没有更新。\n\n所以最好是对整个工程，执行maven命令clean 以及install构建一下项目，然后再去对应的web工程模块构建打包。\n\n如何查看jar包内容？\n我想知道jar包内容，可以通过反编译工具来查看，我们可以查看jar包是否构建最新的修改，以及里面对应依赖包的版本。（反编译（Decompiling）是将已编译的程序代码（通常是机器代码或字节码）转换回源代码的过程。这个过程并不总是能够完全准确，因为在编译过程中，源代码中的一些信息（如注释、格式化、局部变量名等）可能会丢失。）\n\n这里我推荐几个工具，一个是可视化工具JD-GUI，另一种是要下载在命令行中运行的反编译器，这一类要麻烦一些。下载对应的文件，比如说Procyon。从GitHub下载Procyon的jar文件，使用以下命令来运行Procyon反编译器：\n\n```\njava -jar procyon-decompiler.jar -jar <input>.jar -o <output_directory>\n```\n如果你想反编译一个名为example.jar的jar文件，并将反编译后的代码保存在名为decompiled的文件夹中，你可以运行以下命令：\n\n```\njava -jar procyon-decompiler.jar -jar example.jar -o decompiled\n\n```\n打开对应的decompiled，就是对应的jar包反编译文件。","source":"_posts/Java-web工程的Jar包启动以及一下要注意的问题.md","raw":"title: Java web工程的Jar包启动以及一下要注意的问题\nauthor: ZP\ndate: 2024-02-24 14:05:24\ntags:\n---\n现在SpringBoot工程越来越常见，这个JAR文件包含了应用程序所有的依赖，以及一个内嵌的Servlet容器（如Tomcat或Jetty）。这意味着你可以像运行一个普通的Java应用程序一样运行你的Spring Boot应用，而不需要额外的Web服务器或应用服务器。\n\n也就是说对应之前最早的像SSM这样的工程不一样，不需要放在tomcat里面去启动web工程。我们SpringBoot的web工程直接通过命令行形式就可以启动。\n\n\n打包过程：\n\n我们选择到对应的web工程模块，通过maven命令来打包，pom文件对应的打包形式也是jar包\n\n```\n    <packaging>jar</packaging>\n```\n\n我们用idea现成的工具就可以打包，在IDEA中进行打包操作。选择 \"View\" > \"Tool Windows\" > \"Maven\"，在打开的Maven窗口中，展开 \"Lifecycle\"，然后双击 \"clean\" 和 \"package\"。\n\n\n一般来说打的jar包位置都会在maven打包命令执行时会输出在命令行里，你也可以在对应的项目目录里面去找，会有对应的target包里面有。\n\n执行jar包:\n我们找到对应的jar包的位置，可以直接在idea的命令行里面执行java的jar命令来执行启动jar包。\n\n```\njava -jar filename.jar\n\n比如\njava -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar      \n```\n\n有的时候我们会有多种环境配置文件，我们可以指定对应的执行环境配置：\n\n```\njava -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar --spring.profiles.active=t1   \n```\n如果是web工程，你可以像本地启动tomcat的web项目一样，去检查项目是否是正式启动。\n\n需要注意的问题：\njar和war包有什么区别？\n其实war包就是一种特殊的jar包，JAR文件通常包含Java类文件（.class文件）和相关的元数据和资源（如文本、图片等）。它们可以包含任何你想要打包的内容，例如：Java库、应用程序等。它是Java应用程序的常见发布格式，可以被Java运行时环境（JRE）直接执行。\n\nwar包就是用于打包Java Web应用程序。WAR文件的结构遵循Java EE标准，包含了Web应用程序需要的所有内容，如：JSP、Java类、图片、库文件（lib文件夹下的JAR文件）、部署描述符（WEB-INF/web.xml）等。WAR文件通常被部署在一个支持Java EE的Web服务器或应用服务器（如Tomcat、Jetty、GlassFish、JBoss等）上。\n\n所以如果你的web工程时现在使用比较广泛的Spring Boot的web工程，jar包就可以，因为他内嵌了一个web服务器在里面。如果你的是旧的需要依赖web服务器的只能用war包，要通过传统方式来启动。\n\nSpring Boot多个模块形式，打包web工程模块并启动，但是改动没有生效？\n\nweb工程是多种模块/module的形式，这些模块是依赖关系，如果我们的修改不是对应web模块，我们打包的module模块的jar包是没有更新修改，因为jar包里面对应修改的依赖jar包没有更新。\n\n所以最好是对整个工程，执行maven命令clean 以及install构建一下项目，然后再去对应的web工程模块构建打包。\n\n如何查看jar包内容？\n我想知道jar包内容，可以通过反编译工具来查看，我们可以查看jar包是否构建最新的修改，以及里面对应依赖包的版本。（反编译（Decompiling）是将已编译的程序代码（通常是机器代码或字节码）转换回源代码的过程。这个过程并不总是能够完全准确，因为在编译过程中，源代码中的一些信息（如注释、格式化、局部变量名等）可能会丢失。）\n\n这里我推荐几个工具，一个是可视化工具JD-GUI，另一种是要下载在命令行中运行的反编译器，这一类要麻烦一些。下载对应的文件，比如说Procyon。从GitHub下载Procyon的jar文件，使用以下命令来运行Procyon反编译器：\n\n```\njava -jar procyon-decompiler.jar -jar <input>.jar -o <output_directory>\n```\n如果你想反编译一个名为example.jar的jar文件，并将反编译后的代码保存在名为decompiled的文件夹中，你可以运行以下命令：\n\n```\njava -jar procyon-decompiler.jar -jar example.jar -o decompiled\n\n```\n打开对应的decompiled，就是对应的jar包反编译文件。","slug":"Java-web工程的Jar包启动以及一下要注意的问题","published":1,"updated":"2024-02-24T06:05:36.781Z","_id":"clszof4k30000rwvc1fo287v7","comments":1,"layout":"post","photos":[],"link":"","content":"<p>现在SpringBoot工程越来越常见，这个JAR文件包含了应用程序所有的依赖，以及一个内嵌的Servlet容器（如Tomcat或Jetty）。这意味着你可以像运行一个普通的Java应用程序一样运行你的Spring Boot应用，而不需要额外的Web服务器或应用服务器。</p>\n<p>也就是说对应之前最早的像SSM这样的工程不一样，不需要放在tomcat里面去启动web工程。我们SpringBoot的web工程直接通过命令行形式就可以启动。</p>\n<p>打包过程：</p>\n<p>我们选择到对应的web工程模块，通过maven命令来打包，pom文件对应的打包形式也是jar包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;packaging&gt;jar&lt;/packaging&gt;</span><br></pre></td></tr></table></figure>\n\n<p>我们用idea现成的工具就可以打包，在IDEA中进行打包操作。选择 “View” &gt; “Tool Windows” &gt; “Maven”，在打开的Maven窗口中，展开 “Lifecycle”，然后双击 “clean” 和 “package”。</p>\n<p>一般来说打的jar包位置都会在maven打包命令执行时会输出在命令行里，你也可以在对应的项目目录里面去找，会有对应的target包里面有。</p>\n<p>执行jar包:<br>我们找到对应的jar包的位置，可以直接在idea的命令行里面执行java的jar命令来执行启动jar包。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar filename.jar</span><br><span class=\"line\"></span><br><span class=\"line\">比如</span><br><span class=\"line\">java -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar      </span><br></pre></td></tr></table></figure>\n\n<p>有的时候我们会有多种环境配置文件，我们可以指定对应的执行环境配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar --spring.profiles.active=t1   </span><br></pre></td></tr></table></figure>\n<p>如果是web工程，你可以像本地启动tomcat的web项目一样，去检查项目是否是正式启动。</p>\n<p>需要注意的问题：<br>jar和war包有什么区别？<br>其实war包就是一种特殊的jar包，JAR文件通常包含Java类文件（.class文件）和相关的元数据和资源（如文本、图片等）。它们可以包含任何你想要打包的内容，例如：Java库、应用程序等。它是Java应用程序的常见发布格式，可以被Java运行时环境（JRE）直接执行。</p>\n<p>war包就是用于打包Java Web应用程序。WAR文件的结构遵循Java EE标准，包含了Web应用程序需要的所有内容，如：JSP、Java类、图片、库文件（lib文件夹下的JAR文件）、部署描述符（WEB-INF&#x2F;web.xml）等。WAR文件通常被部署在一个支持Java EE的Web服务器或应用服务器（如Tomcat、Jetty、GlassFish、JBoss等）上。</p>\n<p>所以如果你的web工程时现在使用比较广泛的Spring Boot的web工程，jar包就可以，因为他内嵌了一个web服务器在里面。如果你的是旧的需要依赖web服务器的只能用war包，要通过传统方式来启动。</p>\n<p>Spring Boot多个模块形式，打包web工程模块并启动，但是改动没有生效？</p>\n<p>web工程是多种模块&#x2F;module的形式，这些模块是依赖关系，如果我们的修改不是对应web模块，我们打包的module模块的jar包是没有更新修改，因为jar包里面对应修改的依赖jar包没有更新。</p>\n<p>所以最好是对整个工程，执行maven命令clean 以及install构建一下项目，然后再去对应的web工程模块构建打包。</p>\n<p>如何查看jar包内容？<br>我想知道jar包内容，可以通过反编译工具来查看，我们可以查看jar包是否构建最新的修改，以及里面对应依赖包的版本。（反编译（Decompiling）是将已编译的程序代码（通常是机器代码或字节码）转换回源代码的过程。这个过程并不总是能够完全准确，因为在编译过程中，源代码中的一些信息（如注释、格式化、局部变量名等）可能会丢失。）</p>\n<p>这里我推荐几个工具，一个是可视化工具JD-GUI，另一种是要下载在命令行中运行的反编译器，这一类要麻烦一些。下载对应的文件，比如说Procyon。从GitHub下载Procyon的jar文件，使用以下命令来运行Procyon反编译器：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar procyon-decompiler.jar -jar &lt;input&gt;.jar -o &lt;output_directory&gt;</span><br></pre></td></tr></table></figure>\n<p>如果你想反编译一个名为example.jar的jar文件，并将反编译后的代码保存在名为decompiled的文件夹中，你可以运行以下命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar procyon-decompiler.jar -jar example.jar -o decompiled</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>打开对应的decompiled，就是对应的jar包反编译文件。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>现在SpringBoot工程越来越常见，这个JAR文件包含了应用程序所有的依赖，以及一个内嵌的Servlet容器（如Tomcat或Jetty）。这意味着你可以像运行一个普通的Java应用程序一样运行你的Spring Boot应用，而不需要额外的Web服务器或应用服务器。</p>\n<p>也就是说对应之前最早的像SSM这样的工程不一样，不需要放在tomcat里面去启动web工程。我们SpringBoot的web工程直接通过命令行形式就可以启动。</p>\n<p>打包过程：</p>\n<p>我们选择到对应的web工程模块，通过maven命令来打包，pom文件对应的打包形式也是jar包</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;packaging&gt;jar&lt;/packaging&gt;</span><br></pre></td></tr></table></figure>\n\n<p>我们用idea现成的工具就可以打包，在IDEA中进行打包操作。选择 “View” &gt; “Tool Windows” &gt; “Maven”，在打开的Maven窗口中，展开 “Lifecycle”，然后双击 “clean” 和 “package”。</p>\n<p>一般来说打的jar包位置都会在maven打包命令执行时会输出在命令行里，你也可以在对应的项目目录里面去找，会有对应的target包里面有。</p>\n<p>执行jar包:<br>我们找到对应的jar包的位置，可以直接在idea的命令行里面执行java的jar命令来执行启动jar包。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar filename.jar</span><br><span class=\"line\"></span><br><span class=\"line\">比如</span><br><span class=\"line\">java -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar      </span><br></pre></td></tr></table></figure>\n\n<p>有的时候我们会有多种环境配置文件，我们可以指定对应的执行环境配置：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar E:\\xxx_new_0512\\xxx-web\\target\\xxx-web-1.0.0-SNAPSHOT.jar --spring.profiles.active=t1   </span><br></pre></td></tr></table></figure>\n<p>如果是web工程，你可以像本地启动tomcat的web项目一样，去检查项目是否是正式启动。</p>\n<p>需要注意的问题：<br>jar和war包有什么区别？<br>其实war包就是一种特殊的jar包，JAR文件通常包含Java类文件（.class文件）和相关的元数据和资源（如文本、图片等）。它们可以包含任何你想要打包的内容，例如：Java库、应用程序等。它是Java应用程序的常见发布格式，可以被Java运行时环境（JRE）直接执行。</p>\n<p>war包就是用于打包Java Web应用程序。WAR文件的结构遵循Java EE标准，包含了Web应用程序需要的所有内容，如：JSP、Java类、图片、库文件（lib文件夹下的JAR文件）、部署描述符（WEB-INF&#x2F;web.xml）等。WAR文件通常被部署在一个支持Java EE的Web服务器或应用服务器（如Tomcat、Jetty、GlassFish、JBoss等）上。</p>\n<p>所以如果你的web工程时现在使用比较广泛的Spring Boot的web工程，jar包就可以，因为他内嵌了一个web服务器在里面。如果你的是旧的需要依赖web服务器的只能用war包，要通过传统方式来启动。</p>\n<p>Spring Boot多个模块形式，打包web工程模块并启动，但是改动没有生效？</p>\n<p>web工程是多种模块&#x2F;module的形式，这些模块是依赖关系，如果我们的修改不是对应web模块，我们打包的module模块的jar包是没有更新修改，因为jar包里面对应修改的依赖jar包没有更新。</p>\n<p>所以最好是对整个工程，执行maven命令clean 以及install构建一下项目，然后再去对应的web工程模块构建打包。</p>\n<p>如何查看jar包内容？<br>我想知道jar包内容，可以通过反编译工具来查看，我们可以查看jar包是否构建最新的修改，以及里面对应依赖包的版本。（反编译（Decompiling）是将已编译的程序代码（通常是机器代码或字节码）转换回源代码的过程。这个过程并不总是能够完全准确，因为在编译过程中，源代码中的一些信息（如注释、格式化、局部变量名等）可能会丢失。）</p>\n<p>这里我推荐几个工具，一个是可视化工具JD-GUI，另一种是要下载在命令行中运行的反编译器，这一类要麻烦一些。下载对应的文件，比如说Procyon。从GitHub下载Procyon的jar文件，使用以下命令来运行Procyon反编译器：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar procyon-decompiler.jar -jar &lt;input&gt;.jar -o &lt;output_directory&gt;</span><br></pre></td></tr></table></figure>\n<p>如果你想反编译一个名为example.jar的jar文件，并将反编译后的代码保存在名为decompiled的文件夹中，你可以运行以下命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">java -jar procyon-decompiler.jar -jar example.jar -o decompiled</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>打开对应的decompiled，就是对应的jar包反编译文件。</p>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"clgnsww0k0001i4vc7zdqcqt2","tag_id":"clgnsww0p0004i4vc7x5hab2t","_id":"clgnsww0s0008i4vcfeko7cvt"},{"post_id":"clgnsww0r0006i4vc5t9danwv","tag_id":"clgnsww0s0007i4vccdxzhunx","_id":"clgnsww0t0009i4vchpg82wok"}],"Tag":[{"name":"Mockito","_id":"clgnsww0p0004i4vc7x5hab2t"},{"name":"hexo","_id":"clgnsww0s0007i4vccdxzhunx"}]}}